import{k as x,c as U,r as c,I as h,J as m,N as w,P as i,f as s,L as g,ay as _,F as D,aG as C,K as W,bB as Q,U as K,M as V,d as N,aU as b}from"./index.662f4498.js";import{Q as O}from"./QBtnGroup.38b749e6.js";import{t as d}from"./date.7609a602.js";import{t as P,Q as R}from"./index.esm.666e235a.js";const q={class:"row justify-between q-pb-md"},L={class:"col-auto text-center"},A={class:"col-auto"},G={class:"row"},$={class:"col-12"},Y=x({__name:"OrgSchedule",setup(I){const{result:v,loading:M,error:j}=U.providers.unitVacation.getUnitsVacation(),u=c(null);c(null),console.log(u);const k=[{label:"\u041D\u0435\u0434\u0435\u043B\u044F",value:"week",default:!0},{label:"\u041C\u0435\u0441\u044F\u0446",value:"month"}],f=c("week"),p=c(P());function B(t){const e=t.resource.vacationsList;if(!e||e.length===0)return[];const o=t.days[0].date,n=t.days[t.days.length-1].date;return e.filter(l=>y(l.payload.dateFrom,o,n)||y(l.payload.dateTo,o,n))}function y(t,e,o){const n=d(t),a=d(e),l=d(o),r={inclusiveFrom:!0,inclusiveTo:!0,onlyDate:!0};return b.isBetweenDates(n,a,l,r)}function F(t,e){const o=d(e.payload.dateFrom),n=d(t.days[0].date),a=b.getDateDiff(o,n,"days");return(a<0?0:a*parseFloat(t.cellWidth))+(t.cellWidth.endsWith("%")?"%":"px")}function E(t,e){return 2*parseFloat(t.cellWidth)+(t.cellWidth.endsWith("%")?"%":"px")}function S(t,e){return{position:"absolute",background:"white",left:F(t,e),width:E(t)}}function T(t){switch(t){case"IN_PROGRESS":return"\u041E\u0436\u0438\u0434\u0430\u0435\u0442 \u0441\u043E\u0433\u043B\u0430\u0441\u043E\u0432\u0430\u0438\u044F";case"APPROVED":return"\u0421\u043E\u0433\u043B\u0430\u0441\u043E\u0432\u0430\u043D"}}return(t,e)=>{const o=h("KT-ButtonToggle"),n=h("KT-UserAvatar");return m(),w(D,null,[i("div",q,[i("div",L,[s(o,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),options:k},null,8,["modelValue"])]),i("div",A,[i("div",G,[s(O,{class:"kt-navigation",outline:""},{default:g(()=>[s(_,{outline:"",onClick:e[1]||(e[1]=a=>u.value.moveToToday()),icon:"watch_later"}),s(_,{outline:"",onClick:e[2]||(e[2]=a=>u.value.prev()),icon:"navigate_before"}),s(_,{outline:"",onClick:e[3]||(e[3]=a=>u.value.next()),icon:"navigate_next"})]),_:1})])])]),s(V(R),{view:f.value,modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),"model-resources":V(v),"onUpdate:model-resources":e[5]||(e[5]=a=>N(v)?v.value=a:null),"resource-key":"id","resource-label":"firstName","resource-height":40,"resource-min-height":40,"resource-width":200,"resource-min-width":200,animated:"",bordered:"",locale:"ru",weekdays:[1,2,3,4,5,6,0],ref_key:"qcal",ref:u},{"resource-days":g(({scope:a})=>[(m(!0),w(D,null,C(B(a),(l,r)=>(m(),W(K,{key:r,color:"blue",label:T(l.status),style:Q(S(a,l))},null,8,["label","style"]))),128))]),"resource-label":g(({scope:{resource:a}})=>[i("div",$,[s(n,{data:a},null,8,["data"])])]),_:1},8,["view","modelValue","model-resources"])],64)}}});export{Y as _};
