import{t as Xt,al as Qt,r as z,am as Kt,e as S,an as st,ao as Jt,ap as Zt,aq as te,ar as Ct,as as Nt,q as ee,h as H,y as ie,at as Ht,au as se,p as vt,g as re,av as kt,G as bt,k as wt,J as M,K as lt,L as O,f as k,aw as ft,P as N,S as Mt,ax as le,ay as yt,az as oe,R as Et,o as Tt,aA as ne,N as X,aB as ae,aC as he,aD as de,u as ue,aE as ce,aF as ge,M as rt,F as pt,aG as Ot,Q as fe,O as pe,X as me,Y as _e,Z as ve,aH as ye,j as be}from"./index.662f4498.js";import{Q as we}from"./QSlideTransition.16973c42.js";import{c as P}from"./_commonjsHelpers.4e997714.js";const Ut=["vertical","horizontal"],mt={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},At={prevent:!0,mouse:!0,mouseAllDir:!0};var Ee=Xt({name:"QScrollArea",props:{...Qt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(u,{slots:t,emit:e}){const i=z(!1),r=z(!1),n=z(!1),o={vertical:z(0),horizontal:z(0)},a={vertical:{ref:z(null),position:z(0),size:z(0)},horizontal:{ref:z(null),position:z(0),size:z(0)}},c=re(),s=Kt(u,c.proxy.$q);let l,h;const d=z(null),g=S(()=>"q-scrollarea"+(s.value===!0?" q-scrollarea--dark":""));a.vertical.percentage=S(()=>{const _=a.vertical.size.value-o.vertical.value;if(_<=0)return 0;const y=st(a.vertical.position.value/_,0,1);return Math.round(y*1e4)/1e4}),a.vertical.thumbHidden=S(()=>(u.visible===null?n.value:u.visible)!==!0&&i.value===!1&&r.value===!1||a.vertical.size.value<=o.vertical.value+1),a.vertical.thumbStart=S(()=>a.vertical.percentage.value*(o.vertical.value-a.vertical.thumbSize.value)),a.vertical.thumbSize=S(()=>Math.round(st(o.vertical.value*o.vertical.value/a.vertical.size.value,50,o.vertical.value))),a.vertical.style=S(()=>({...u.thumbStyle,...u.verticalThumbStyle,top:`${a.vertical.thumbStart.value}px`,height:`${a.vertical.thumbSize.value}px`})),a.vertical.thumbClass=S(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.vertical.barClass=S(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),a.horizontal.percentage=S(()=>{const _=a.horizontal.size.value-o.horizontal.value;if(_<=0)return 0;const y=st(a.horizontal.position.value/_,0,1);return Math.round(y*1e4)/1e4}),a.horizontal.thumbHidden=S(()=>(u.visible===null?n.value:u.visible)!==!0&&i.value===!1&&r.value===!1||a.horizontal.size.value<=o.horizontal.value+1),a.horizontal.thumbStart=S(()=>a.horizontal.percentage.value*(o.horizontal.value-a.horizontal.thumbSize.value)),a.horizontal.thumbSize=S(()=>Math.round(st(o.horizontal.value*o.horizontal.value/a.horizontal.size.value,50,o.horizontal.value))),a.horizontal.style=S(()=>({...u.thumbStyle,...u.horizontalThumbStyle,left:`${a.horizontal.thumbStart.value}px`,width:`${a.horizontal.thumbSize.value}px`})),a.horizontal.thumbClass=S(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.horizontal.barClass=S(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const p=S(()=>a.vertical.thumbHidden.value===!0&&a.horizontal.thumbHidden.value===!0?u.contentStyle:u.contentActiveStyle),f=[[kt,_=>{St(_,"vertical")},void 0,{vertical:!0,...At}]],m=[[kt,_=>{St(_,"horizontal")},void 0,{horizontal:!0,...At}]];function b(){const _={};return Ut.forEach(y=>{const E=a[y];_[y+"Position"]=E.position.value,_[y+"Percentage"]=E.percentage.value,_[y+"Size"]=E.size.value,_[y+"ContainerSize"]=o[y].value}),_}const v=Jt(()=>{const _=b();_.ref=c.proxy,e("scroll",_)},0);function x(_,y,E){if(Ut.includes(_)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(_==="vertical"?Nt:Ct)(d.value,y,E)}function B({height:_,width:y}){let E=!1;o.vertical.value!==_&&(o.vertical.value=_,E=!0),o.horizontal.value!==y&&(o.horizontal.value=y,E=!0),E===!0&&tt()}function gt({position:_}){let y=!1;a.vertical.position.value!==_.top&&(a.vertical.position.value=_.top,y=!0),a.horizontal.position.value!==_.left&&(a.horizontal.position.value=_.left,y=!0),y===!0&&tt()}function jt({height:_,width:y}){a.horizontal.size.value!==y&&(a.horizontal.size.value=y,tt()),a.vertical.size.value!==_&&(a.vertical.size.value=_,tt())}function St(_,y){const E=a[y];if(_.isFirst===!0){if(E.thumbHidden.value===!0)return;h=E.position.value,r.value=!0}else if(r.value!==!0)return;_.isFinal===!0&&(r.value=!1);const I=mt[y],it=o[y].value,qt=(E.size.value-it)/(it-E.thumbSize.value),Yt=_.distance[I.dist],Vt=h+(_.direction===I.dir?1:-1)*Yt*qt;Rt(Vt,y)}function zt(_,y){const E=a[y];if(E.thumbHidden.value!==!0){const I=_[mt[y].offset];if(I<E.thumbStart.value||I>E.thumbStart.value+E.thumbSize.value){const it=I-E.thumbSize.value/2;Rt(it/o[y].value*E.size.value,y)}E.ref.value!==null&&E.ref.value.dispatchEvent(new MouseEvent(_.type,_))}}function Wt(_){zt(_,"vertical")}function Gt(_){zt(_,"horizontal")}function tt(){i.value===!0?clearTimeout(l):i.value=!0,l=setTimeout(()=>{i.value=!1},u.delay),u.onScroll!==void 0&&v()}function Rt(_,y){d.value[mt[y].scroll]=_}function $t(){n.value=!0}function Ft(){n.value=!1}Object.assign(c.proxy,{getScrollTarget:()=>d.value,getScroll:b,getScrollPosition:()=>({top:a.vertical.position.value,left:a.horizontal.position.value}),getScrollPercentage:()=>({top:a.vertical.percentage.value,left:a.horizontal.percentage.value}),setScrollPosition:x,setScrollPercentage(_,y,E){x(_,y*(a[_].size.value-o[_].value),E)}});let et=null;return Zt(()=>{et={top:a.vertical.position.value,left:a.horizontal.position.value}}),te(()=>{if(et===null)return;const _=d.value;_!==null&&(Ct(_,et.left),Nt(_,et.top))}),ee(v.cancel),()=>H("div",{class:g.value,onMouseenter:$t,onMouseleave:Ft},[H("div",{ref:d,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:u.tabindex!==void 0?u.tabindex:void 0},[H("div",{class:"q-scrollarea__content absolute",style:p.value},ie(t.default,[H(Ht,{debounce:0,onResize:jt})])),H(se,{axis:"both",onScroll:gt})]),H(Ht,{debounce:0,onResize:B}),H("div",{class:a.vertical.barClass.value,style:[u.barStyle,u.verticalBarStyle],"aria-hidden":"true",onMousedown:Wt}),H("div",{class:a.horizontal.barClass.value,style:[u.barStyle,u.horizontalBarStyle],"aria-hidden":"true",onMousedown:Gt}),vt(H("div",{ref:a.vertical.ref,class:a.vertical.thumbClass.value,style:a.vertical.style.value,"aria-hidden":"true"}),f),vt(H("div",{ref:a.horizontal.ref,class:a.horizontal.thumbClass.value,style:a.horizontal.style.value,"aria-hidden":"true"}),m)])}}),xt={},K={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.Utils=D.obsoleteAttr=D.obsoleteOptsDel=D.obsoleteOpts=D.obsolete=void 0;function xe(u,t,e,i,r){let n=(...o)=>(console.warn("gridstack.js: Function `"+e+"` is deprecated in "+r+" and has been replaced with `"+i+"`. It will be **completely** removed in v1.0"),t.apply(u,o));return n.prototype=t.prototype,n}D.obsolete=xe;function De(u,t,e,i){u[t]!==void 0&&(u[e]=u[t],console.warn("gridstack.js: Option `"+t+"` is deprecated in "+i+" and has been replaced with `"+e+"`. It will be **completely** removed in v1.0"))}D.obsoleteOpts=De;function Se(u,t,e,i){u[t]!==void 0&&console.warn("gridstack.js: Option `"+t+"` is deprecated in "+e+i)}D.obsoleteOptsDel=Se;function ze(u,t,e,i){let r=u.getAttribute(t);r!==null&&(u.setAttribute(e,r),console.warn("gridstack.js: attribute `"+t+"`="+r+" is deprecated on this object in "+i+" and has been replaced with `"+e+"`. It will be **completely** removed in v1.0"))}D.obsoleteAttr=ze;class Q{static getElements(t){if(typeof t=="string"){let e=document.querySelectorAll(t);return!e.length&&t[0]!=="."&&t[0]!=="#"&&(e=document.querySelectorAll("."+t),e.length||(e=document.querySelectorAll("#"+t))),Array.from(e)}return[t]}static getElement(t){if(typeof t=="string"){if(!t.length)return null;if(t[0]==="#")return document.getElementById(t.substring(1));if(t[0]==="."||t[0]==="[")return document.querySelector(t);if(!isNaN(+t[0]))return document.getElementById(t);let e=document.querySelector(t);return e||(e=document.getElementById(t)),e||(e=document.querySelector("."+t)),e}return t}static isIntercepted(t,e){return!(t.y>=e.y+e.h||t.y+t.h<=e.y||t.x+t.w<=e.x||t.x>=e.x+e.w)}static isTouching(t,e){return Q.isIntercepted(t,{x:e.x-.5,y:e.y-.5,w:e.w+1,h:e.h+1})}static sort(t,e,i){return i=i||t.reduce((r,n)=>Math.max(n.x+n.w,r),0)||12,e===-1?t.sort((r,n)=>n.x+n.y*i-(r.x+r.y*i)):t.sort((r,n)=>r.x+r.y*i-(n.x+n.y*i))}static createStylesheet(t,e){let i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("gs-style-id",t),i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),e?e.insertBefore(i,e.firstChild):(e=document.getElementsByTagName("head")[0],e.appendChild(i)),i.sheet}static removeStylesheet(t){let e=document.querySelector("STYLE[gs-style-id="+t+"]");e&&e.parentNode&&e.remove()}static addCSSRule(t,e,i){typeof t.addRule=="function"?t.addRule(e,i):typeof t.insertRule=="function"&&t.insertRule(`${e}{${i}}`)}static toBool(t){return typeof t=="boolean"?t:typeof t=="string"?(t=t.toLowerCase(),!(t===""||t==="no"||t==="false"||t==="0")):Boolean(t)}static toNumber(t){return t===null||t.length===0?void 0:Number(t)}static parseHeight(t){let e,i="px";if(typeof t=="string"){let r=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);if(!r)throw new Error("Invalid height");i=r[2]||"px",e=parseFloat(r[1])}else e=t;return{h:e,unit:i}}static defaults(t,...e){return e.forEach(i=>{for(const r in i){if(!i.hasOwnProperty(r))return;t[r]===null||t[r]===void 0?t[r]=i[r]:typeof i[r]=="object"&&typeof t[r]=="object"&&this.defaults(t[r],i[r])}}),t}static same(t,e){if(typeof t!="object")return t==e;if(typeof t!=typeof e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}static copyPos(t,e,i=!1){return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,i&&(e.minW&&(t.minW=e.minW),e.minH&&(t.minH=e.minH),e.maxW&&(t.maxW=e.maxW),e.maxH&&(t.maxH=e.maxH)),t}static samePos(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}static removeInternalAndSame(t,e){if(!(typeof t!="object"||typeof e!="object"))for(let i in t){let r=t[i];if(i[0]==="_"||r===e[i])delete t[i];else if(r&&typeof r=="object"&&e[i]!==void 0){for(let n in r)(r[n]===e[i][n]||n[0]==="_")&&delete r[n];Object.keys(r).length||delete t[i]}}}static closestByClass(t,e){for(;t;){if(t.classList.contains(e))return t;t=t.parentElement}return null}static throttle(t,e){let i=!1;return(...r)=>{i||(i=!0,setTimeout(()=>{t(...r),i=!1},e))}}static removePositioningStyles(t){let e=t.style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")}static getScrollElement(t){if(!t)return document.scrollingElement||document.documentElement;const e=getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowY)?t:this.getScrollElement(t.parentElement)}static updateScrollPosition(t,e,i){let r=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(r.top<0||r.bottom>n){let o=r.bottom-n,a=r.top,c=this.getScrollElement(t);if(c!==null){let s=c.scrollTop;r.top<0&&i<0?t.offsetHeight>n?c.scrollTop+=i:c.scrollTop+=Math.abs(a)>Math.abs(i)?i:a:i>0&&(t.offsetHeight>n?c.scrollTop+=i:c.scrollTop+=o>i?i:o),e.top+=c.scrollTop-s}}}static updateScrollResize(t,e,i){const r=this.getScrollElement(e),n=r.clientHeight,o=r===this.getScrollElement()?0:r.getBoundingClientRect().top,a=t.clientY-o,c=a<i,s=a>n-i;c?r.scrollBy({behavior:"smooth",top:a-i}):s&&r.scrollBy({behavior:"smooth",top:i-(n-a)})}static clone(t){return t==null||typeof t!="object"?t:t instanceof Array?[...t]:Object.assign({},t)}static cloneDeep(t){const e=Q.clone(t);for(const i in e)e.hasOwnProperty(i)&&typeof e[i]=="object"&&i.substring(0,2)!=="__"&&!Re.find(r=>r===i)&&(e[i]=Q.cloneDeep(t[i]));return e}}D.Utils=Q;const Re=["_isNested","el","grid","subGrid","engine"];Object.defineProperty(K,"__esModule",{value:!0});K.GridStackEngine=void 0;const w=D;class L{constructor(t={}){this.addedNodes=[],this.removedNodes=[],this.column=t.column||12,this.maxRow=t.maxRow,this._float=t.float,this.nodes=t.nodes||[],this.onChange=t.onChange}batchUpdate(){return this.batchMode?this:(this.batchMode=!0,this._prevFloat=this._float,this._float=!0,this.saveInitial())}commit(){return this.batchMode?(this.batchMode=!1,this._float=this._prevFloat,delete this._prevFloat,this._packNodes()._notify()):this}_useEntireRowArea(t,e){return!this.float&&!this._hasLocked&&(!t._moving||t._skipDown||e.y<=t.y)}_fixCollisions(t,e=t,i,r={}){if(this.sortNodes(-1),i=i||this.collide(t,e),!i)return!1;if(t._moving&&!r.nested&&!this.float&&this.swap(t,i))return!0;let n=e;this._useEntireRowArea(t,e)&&(n={x:0,w:this.column,y:e.y,h:e.h},i=this.collide(t,n,r.skip));let o=!1,a={nested:!0,pack:!1};for(;i=i||this.collide(t,n,r.skip);){let c;if(i.locked||t._moving&&!t._skipDown&&e.y>t.y&&!this.float&&(!this.collide(i,Object.assign(Object.assign({},i),{y:t.y}),t)||!this.collide(i,Object.assign(Object.assign({},i),{y:e.y-i.h}),t))?(t._skipDown=t._skipDown||e.y>t.y,c=this.moveNode(t,Object.assign(Object.assign(Object.assign({},e),{y:i.y+i.h}),a)),i.locked&&c?w.Utils.copyPos(e,t):!i.locked&&c&&r.pack&&(this._packNodes(),e.y=i.y+i.h,w.Utils.copyPos(t,e)),o=o||c):c=this.moveNode(i,Object.assign(Object.assign(Object.assign({},i),{y:e.y+e.h,skip:t}),a)),!c)return o;i=void 0}return o}collide(t,e=t,i){return this.nodes.find(r=>r!==t&&r!==i&&w.Utils.isIntercepted(r,e))}collideAll(t,e=t,i){return this.nodes.filter(r=>r!==t&&r!==i&&w.Utils.isIntercepted(r,e))}collideCoverage(t,e,i){if(!e.rect||!t._rect)return;let r=t._rect,n=Object.assign({},e.rect);n.y>r.y?(n.h+=n.y-r.y,n.y=r.y):n.h+=r.y-n.y,n.x>r.x?(n.w+=n.x-r.x,n.x=r.x):n.w+=r.x-n.x;let o;return i.forEach(a=>{if(a.locked||!a._rect)return;let c=a._rect,s=Number.MAX_VALUE,l=Number.MAX_VALUE,h=.5;r.y<c.y?s=(n.y+n.h-c.y)/c.h:r.y+r.h>c.y+c.h&&(s=(c.y+c.h-n.y)/c.h),r.x<c.x?l=(n.x+n.w-c.x)/c.w:r.x+r.w>c.x+c.w&&(l=(c.x+c.w-n.x)/c.w);let d=Math.min(l,s);d>h&&(h=d,o=a)}),o}cacheRects(t,e,i,r,n,o){return this.nodes.forEach(a=>a._rect={y:a.y*e+i,x:a.x*t+o,w:a.w*t-o-r,h:a.h*e-i-n}),this}swap(t,e){if(!e||e.locked||!t||t.locked)return!1;function i(){let n=e.x,o=e.y;return e.x=t.x,e.y=t.y,t.h!=e.h?(t.x=n,t.y=e.y+e.h):t.w!=e.w?(t.x=e.x+e.w,t.y=o):(t.x=n,t.y=o),t._dirty=e._dirty=!0,!0}let r;if(t.w===e.w&&t.h===e.h&&(t.x===e.x||t.y===e.y)&&(r=w.Utils.isTouching(t,e)))return i();if(r!==!1){if(t.w===e.w&&t.x===e.x&&(r||(r=w.Utils.isTouching(t,e)))){if(e.y<t.y){let n=t;t=e,e=n}return i()}if(r!==!1){if(t.h===e.h&&t.y===e.y&&(r||(r=w.Utils.isTouching(t,e)))){if(e.x<t.x){let n=t;t=e,e=n}return i()}return!1}}}isAreaEmpty(t,e,i,r){let n={x:t||0,y:e||0,w:i||1,h:r||1};return!this.collide(n)}compact(){if(this.nodes.length===0)return this;this.batchUpdate().sortNodes();let t=this.nodes;return this.nodes=[],t.forEach(e=>{e.locked||(e.autoPosition=!0),this.addNode(e,!1),e._dirty=!0}),this.commit()}set float(t){this._float!==t&&(this._float=t||!1,t||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(t){return this.nodes=w.Utils.sort(this.nodes,t,this.column),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(t=>{if(t._updating||t._orig===void 0||t.y===t._orig.y)return;let e=t.y;for(;e>t._orig.y;)--e,this.collide(t,{x:t.x,y:e,w:t.w,h:t.h})||(t._dirty=!0,t.y=e)}):this.nodes.forEach((t,e)=>{if(!t.locked)for(;t.y>0;){let i=e===0?0:t.y-1;if(!(e===0||!this.collide(t,{x:t.x,y:i,w:t.w,h:t.h})))break;t._dirty=t.y!==i,t.y=i}}),this)}prepareNode(t,e){t=t||{},t._id=t._id||L._idSeq++,(t.x===void 0||t.y===void 0||t.x===null||t.y===null)&&(t.autoPosition=!0);let i={x:0,y:0,w:1,h:1};return w.Utils.defaults(t,i),t.autoPosition||delete t.autoPosition,t.noResize||delete t.noResize,t.noMove||delete t.noMove,typeof t.x=="string"&&(t.x=Number(t.x)),typeof t.y=="string"&&(t.y=Number(t.y)),typeof t.w=="string"&&(t.w=Number(t.w)),typeof t.h=="string"&&(t.h=Number(t.h)),isNaN(t.x)&&(t.x=i.x,t.autoPosition=!0),isNaN(t.y)&&(t.y=i.y,t.autoPosition=!0),isNaN(t.w)&&(t.w=i.w),isNaN(t.h)&&(t.h=i.h),this.nodeBoundFix(t,e)}nodeBoundFix(t,e){let i=t._orig||w.Utils.copyPos({},t);return t.maxW&&(t.w=Math.min(t.w,t.maxW)),t.maxH&&(t.h=Math.min(t.h,t.maxH)),t.minW&&t.minW<=this.column&&(t.w=Math.max(t.w,t.minW)),t.minH&&(t.h=Math.max(t.h,t.minH)),t.w>this.column?(this.column<12&&!this._inColumnResize&&(t.w=Math.min(12,t.w),this.cacheOneLayout(t,12)),t.w=this.column):t.w<1&&(t.w=1),this.maxRow&&t.h>this.maxRow?t.h=this.maxRow:t.h<1&&(t.h=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.w>this.column&&(e?t.w=this.column-t.x:t.x=this.column-t.w),this.maxRow&&t.y+t.h>this.maxRow&&(e?t.h=this.maxRow-t.y:t.y=this.maxRow-t.h),w.Utils.samePos(t,i)||(t._dirty=!0),t}getDirtyNodes(t){return t?this.nodes.filter(e=>e._dirty&&!w.Utils.samePos(e,e._orig)):this.nodes.filter(e=>e._dirty)}_notify(t){if(this.batchMode||!this.onChange)return this;let e=(t||[]).concat(this.getDirtyNodes());return this.onChange(e),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(t=>{delete t._dirty,delete t._lastTried}),this)}saveInitial(){return this.nodes.forEach(t=>{t._orig=w.Utils.copyPos({},t),delete t._dirty}),this._hasLocked=this.nodes.some(t=>t.locked),this}restoreInitial(){return this.nodes.forEach(t=>{w.Utils.samePos(t,t._orig)||(w.Utils.copyPos(t,t._orig),t._dirty=!0)}),this._notify(),this}addNode(t,e=!1){let i=this.nodes.find(r=>r._id===t._id);if(i)return i;if(t=this._inColumnResize?this.nodeBoundFix(t):this.prepareNode(t),delete t._temporaryRemoved,delete t._removeDOM,t.autoPosition){this.sortNodes();for(let r=0;;++r){let n=r%this.column,o=Math.floor(r/this.column);if(n+t.w>this.column)continue;let a={x:n,y:o,w:t.w,h:t.h};if(!this.nodes.find(c=>w.Utils.isIntercepted(a,c))){t.x=n,t.y=o,delete t.autoPosition;break}}}return this.nodes.push(t),e&&this.addedNodes.push(t),this._fixCollisions(t),this.batchMode||this._packNodes()._notify(),t}removeNode(t,e=!0,i=!1){return this.nodes.find(r=>r===t)?(i&&this.removedNodes.push(t),e&&(t._removeDOM=!0),this.nodes=this.nodes.filter(r=>r!==t),this._packNodes()._notify([t])):this}removeAll(t=!0){return delete this._layouts,this.nodes.length===0?this:(t&&this.nodes.forEach(e=>e._removeDOM=!0),this.removedNodes=this.nodes,this.nodes=[],this._notify(this.removedNodes))}moveNodeCheck(t,e){if(!this.changedPosConstrain(t,e))return!1;if(e.pack=!0,!this.maxRow)return this.moveNode(t,e);let i,r=new L({column:this.column,float:this.float,nodes:this.nodes.map(o=>o===t?(i=Object.assign({},o),i):Object.assign({},o))});if(!i)return!1;let n=r.moveNode(i,e)&&r.getRow()<=this.maxRow;if(!n&&!e.resizing){let o=this.collide(t,e);if(o&&this.swap(t,o))return this._notify(),!0}return n?(r.nodes.filter(o=>o._dirty).forEach(o=>{let a=this.nodes.find(c=>c._id===o._id);!a||(w.Utils.copyPos(a,o),a._dirty=!0)}),this._notify(),!0):!1}willItFit(t){if(delete t._willFitPos,!this.maxRow)return!0;let e=new L({column:this.column,float:this.float,nodes:this.nodes.map(r=>Object.assign({},r))}),i=Object.assign({},t);return this.cleanupNode(i),delete i.el,delete i._id,delete i.content,delete i.grid,e.addNode(i),e.getRow()<=this.maxRow?(t._willFitPos=w.Utils.copyPos({},i),!0):!1}changedPosConstrain(t,e){return e.w=e.w||t.w,e.h=e.h||t.h,t.x!==e.x||t.y!==e.y?!0:(t.maxW&&(e.w=Math.min(e.w,t.maxW)),t.maxH&&(e.h=Math.min(e.h,t.maxH)),t.minW&&(e.w=Math.max(e.w,t.minW)),t.minH&&(e.h=Math.max(e.h,t.minH)),t.w!==e.w||t.h!==e.h)}moveNode(t,e){if(!t||!e)return!1;e.pack===void 0&&(e.pack=!0),typeof e.x!="number"&&(e.x=t.x),typeof e.y!="number"&&(e.y=t.y),typeof e.w!="number"&&(e.w=t.w),typeof e.h!="number"&&(e.h=t.h);let i=t.w!==e.w||t.h!==e.h,r=w.Utils.copyPos({},t,!0);if(w.Utils.copyPos(r,e),r=this.nodeBoundFix(r,i),w.Utils.copyPos(e,r),w.Utils.samePos(t,e))return!1;let n=w.Utils.copyPos({},t),o=this.collideAll(t,r,e.skip),a=!0;if(o.length){let c=t._moving&&!e.nested?this.collideCoverage(t,e,o):o[0];c?a=!this._fixCollisions(t,r,c,e):a=!1}return a&&(t._dirty=!0,w.Utils.copyPos(t,r)),e.pack&&this._packNodes()._notify(),!w.Utils.samePos(t,n)}getRow(){return this.nodes.reduce((t,e)=>Math.max(t,e.y+e.h),0)}beginUpdate(t){return t._updating||(t._updating=!0,delete t._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let t=this.nodes.find(e=>e._updating);return t&&(delete t._updating,delete t._skipDown),this}save(t=!0){var e;let i=(e=this._layouts)===null||e===void 0?void 0:e.length,r=i&&this.column!==i-1?this._layouts[i-1]:null,n=[];return this.sortNodes(),this.nodes.forEach(o=>{let a=r==null?void 0:r.find(s=>s._id===o._id),c=Object.assign({},o);a&&(c.x=a.x,c.y=a.y,c.w=a.w);for(let s in c)(s[0]==="_"||c[s]===null||c[s]===void 0)&&delete c[s];delete c.grid,t||delete c.el,c.autoPosition||delete c.autoPosition,c.noResize||delete c.noResize,c.noMove||delete c.noMove,c.locked||delete c.locked,n.push(c)}),n}layoutsNodesChange(t){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((e,i)=>{if(!e||i===this.column)return this;if(i<this.column)this._layouts[i]=void 0;else{let r=i/this.column;t.forEach(n=>{if(!n._orig)return;let o=e.find(a=>a._id===n._id);!o||(n.y!==n._orig.y&&(o.y+=n.y-n._orig.y),n.x!==n._orig.x&&(o.x=Math.round(n.x*r)),n.w!==n._orig.w&&(o.w=Math.round(n.w*r)))})}}),this)}updateNodeWidths(t,e,i,r="moveScale"){var n;if(!this.nodes.length||!e||t===e)return this;this.cacheLayout(this.nodes,t),this.batchUpdate();let o=[],a=!1;if(e===1&&(i==null?void 0:i.length)){a=!0;let s=0;i.forEach(l=>{l.x=0,l.w=1,l.y=Math.max(l.y,s),s=l.y+l.h}),o=i,i=[]}else i=w.Utils.sort(this.nodes,-1,t);let c=[];if(e>t){c=this._layouts[e]||[];let s=this._layouts.length-1;!c.length&&t!==s&&((n=this._layouts[s])===null||n===void 0?void 0:n.length)&&(t=s,this._layouts[s].forEach(l=>{let h=i.find(d=>d._id===l._id);h&&(h.x=l.x,h.y=l.y,h.w=l.w)}))}if(c.forEach(s=>{let l=i.findIndex(h=>h._id===s._id);l!==-1&&(i[l].x=s.x,i[l].y=s.y,i[l].w=s.w,o.push(i[l]),i.splice(l,1))}),i.length){if(typeof r=="function")r(e,t,o,i);else if(!a){let s=e/t,l=r==="move"||r==="moveScale",h=r==="scale"||r==="moveScale";i.forEach(d=>{d.x=e===1?0:l?Math.round(d.x*s):Math.min(d.x,e-1),d.w=e===1||t===1?1:h?Math.round(d.w*s)||1:Math.min(d.w,e),o.push(d)}),i=[]}}return o=w.Utils.sort(o,-1,e),this._inColumnResize=!0,this.nodes=[],o.forEach(s=>{this.addNode(s,!1),delete s._orig}),this.commit(),delete this._inColumnResize,this}cacheLayout(t,e,i=!1){let r=[];return t.forEach((n,o)=>{n._id=n._id||L._idSeq++,r[o]={x:n.x,y:n.y,w:n.w,_id:n._id}}),this._layouts=i?[]:this._layouts||[],this._layouts[e]=r,this}cacheOneLayout(t,e){t._id=t._id||L._idSeq++;let i={x:t.x,y:t.y,w:t.w,_id:t._id};this._layouts=this._layouts||[],this._layouts[e]=this._layouts[e]||[];let r=this._layouts[e].findIndex(n=>n._id===t._id);return r===-1?this._layouts[e].push(i):this._layouts[e][r]=i,this}cleanupNode(t){for(let e in t)e[0]==="_"&&e!=="_id"&&delete t[e];return this}}K.GridStackEngine=L;L._idSeq=1;var $={};Object.defineProperty($,"__esModule",{value:!0});$.GridStackDDI=void 0;class j{static registerPlugin(t){return j.ddi=new t,j.ddi}static get(){return j.ddi||j.registerPlugin(j)}remove(t){return this}}$.GridStackDDI=j;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});(function(u){var t=P&&P.__createBinding||(Object.create?function(c,s,l,h){h===void 0&&(h=l),Object.defineProperty(c,h,{enumerable:!0,get:function(){return s[l]}})}:function(c,s,l,h){h===void 0&&(h=l),c[h]=s[l]}),e=P&&P.__exportStar||function(c,s){for(var l in c)l!=="default"&&!s.hasOwnProperty(l)&&t(s,c,l)};Object.defineProperty(u,"__esModule",{value:!0}),u.GridStack=void 0;/*!
 * GridStack 5.1.1
 * https://gridstackjs.com/
 *
 * Copyright (c) 2021-2022 Alain Dumesny
 * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE
 */const i=K,r=D,n=$;e(Bt,u),e(D,u),e(K,u),e($,u);const o={column:12,minRow:0,maxRow:0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,styleInHead:!1,cellHeight:"auto",cellHeightThrottle:100,margin:10,auto:!0,oneColumnSize:768,float:!1,staticGrid:!1,animate:!0,alwaysShowResizeHandle:!1,resizable:{autoHide:!0,handles:"se"},draggable:{handle:".grid-stack-item-content",scroll:!1,appendTo:"body"},disableDrag:!1,disableResize:!1,rtl:"auto",removable:!1,removableOptions:{accept:".grid-stack-item"},marginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:!1,oneColumnModeDomSort:!1};class a{constructor(s,l={}){this._gsEventHandler={},this._extraDragRow=0,this.el=s,l=l||{},l.row&&(l.minRow=l.maxRow=l.row,delete l.row);let h=r.Utils.toNumber(s.getAttribute("gs-row"));l.column==="auto"&&delete l.column;let d=l;d.minWidth!==void 0&&(l.oneColumnSize=l.oneColumnSize||d.minWidth,delete d.minWidth);let g=Object.assign(Object.assign({},r.Utils.cloneDeep(o)),{column:r.Utils.toNumber(s.getAttribute("gs-column"))||12,minRow:h||r.Utils.toNumber(s.getAttribute("gs-min-row"))||0,maxRow:h||r.Utils.toNumber(s.getAttribute("gs-max-row"))||0,staticGrid:r.Utils.toBool(s.getAttribute("gs-static"))||!1,_styleSheetClass:"grid-stack-instance-"+(Math.random()*1e4).toFixed(0),alwaysShowResizeHandle:l.alwaysShowResizeHandle||!1,resizable:{autoHide:!l.alwaysShowResizeHandle,handles:"se"},draggable:{handle:(l.handleClass?"."+l.handleClass:l.handle?l.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"},removableOptions:{accept:"."+(l.itemClass||"grid-stack-item")}});s.getAttribute("gs-animate")&&(g.animate=r.Utils.toBool(s.getAttribute("gs-animate"))),this.opts=r.Utils.defaults(l,g),l=null,this._initMargin(),this.opts.column!==1&&!this.opts.disableOneColumnMode&&this._widthOrContainer()<=this.opts.oneColumnSize&&(this._prevColumn=this.getColumn(),this.opts.column=1),this.opts.rtl==="auto"&&(this.opts.rtl=s.style.direction==="rtl"),this.opts.rtl&&this.el.classList.add("grid-stack-rtl");let p=r.Utils.closestByClass(this.el,o.itemClass);p&&p.gridstackNode&&(this.opts._isNested=p.gridstackNode,this.opts._isNested.subGrid=this,p.classList.add("grid-stack-nested"),this.el.classList.add("grid-stack-nested")),this._isAutoCellHeight=this.opts.cellHeight==="auto",this._isAutoCellHeight||this.opts.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof this.opts.cellHeight=="number"&&this.opts.cellHeightUnit&&this.opts.cellHeightUnit!==o.cellHeightUnit&&(this.opts.cellHeight=this.opts.cellHeight+this.opts.cellHeightUnit,delete this.opts.cellHeightUnit),this.cellHeight(this.opts.cellHeight,!1)),this.el.classList.add(this.opts._styleSheetClass),this._setStaticClass();let f=this.opts.engineClass||a.engineClass||i.GridStackEngine;if(this.engine=new f({column:this.getColumn(),float:this.opts.float,maxRow:this.opts.maxRow,onChange:m=>{let b=0;this.engine.nodes.forEach(v=>{b=Math.max(b,v.y+v.h)}),m.forEach(v=>{let x=v.el;!x||(v._removeDOM?(x&&x.remove(),delete v._removeDOM):this._writePosAttr(x,v))}),this._updateStyles(!1,b)}}),this.opts.auto){this.batchUpdate();let m=[];this.getGridItems().forEach(b=>{let v=parseInt(b.getAttribute("gs-x")),x=parseInt(b.getAttribute("gs-y"));m.push({el:b,i:(Number.isNaN(v)?1e3:v)+(Number.isNaN(x)?1e3:x)*this.getColumn()})}),m.sort((b,v)=>b.i-v.i).forEach(b=>this._prepareElement(b.el)),this.commit()}this.setAnimation(this.opts.animate),this._updateStyles(),this.opts.column!=12&&this.el.classList.add("grid-stack-"+this.opts.column),this.opts.dragIn&&a.setupDragIn(this.opts.dragIn,this.opts.dragInOptions),delete this.opts.dragIn,delete this.opts.dragInOptions,this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateWindowResizeEvent()}static init(s={},l=".grid-stack"){let h=a.getGridElement(l);return h?(h.gridstack||(h.gridstack=new a(h,r.Utils.cloneDeep(s))),h.gridstack):(console.error(typeof l=="string"?'GridStack.initAll() no grid was found with selector "'+l+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(s={},l=".grid-stack"){let h=[];return a.getGridElements(l).forEach(d=>{d.gridstack||(d.gridstack=new a(d,r.Utils.cloneDeep(s)),delete s.dragIn,delete s.dragInOptions),h.push(d.gridstack)}),h.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+l+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`),h}static addGrid(s,l={}){if(!s)return null;let h=s;if(!s.classList.contains("grid-stack")){let g=document.implementation.createHTMLDocument("");g.body.innerHTML=`<div class="grid-stack ${l.class||""}"></div>`,h=g.body.children[0],s.appendChild(h)}let d=a.init(l,h);if(d.opts.children){let g=d.opts.children;delete d.opts.children,d.load(g)}return d}static registerEngine(s){a.engineClass=s}get placeholder(){if(!this._placeholder){let s=document.createElement("div");s.className="placeholder-content",this.opts.placeholderText&&(s.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,o.itemClass,this.opts.itemClass),this.placeholder.appendChild(s)}return this._placeholder}addWidget(s,l){if(arguments.length>2){console.warn("gridstack.ts: `addWidget(el, x, y, width...)` is deprecated. Use `addWidget({x, y, w, content, ...})`. It will be removed soon");let f=arguments,m=1,b={x:f[m++],y:f[m++],w:f[m++],h:f[m++],autoPosition:f[m++],minW:f[m++],maxW:f[m++],minH:f[m++],maxH:f[m++],id:f[m++]};return this.addWidget(s,b)}function h(f){return f.x!==void 0||f.y!==void 0||f.w!==void 0||f.h!==void 0||f.content!==void 0}let d;if(typeof s=="string"){let f=document.implementation.createHTMLDocument("");f.body.innerHTML=s,d=f.body.children[0]}else if(arguments.length===0||arguments.length===1&&h(s)){let f=s&&s.content||"";l=s;let m=document.implementation.createHTMLDocument("");m.body.innerHTML=`<div class="grid-stack-item ${this.opts.itemClass||""}"><div class="grid-stack-item-content">${f}</div></div>`,d=m.body.children[0]}else d=s;let g=this._readAttr(d);l=r.Utils.cloneDeep(l)||{},r.Utils.defaults(l,g);let p=this.engine.prepareNode(l);if(this._writeAttr(d,l),this._insertNotAppend?this.el.prepend(d):this.el.appendChild(d),this._prepareElement(d,!0,l),this._updateContainerHeight(),p.subGrid&&!p.subGrid.el){let f,m=p.subGrid;m.column==="auto"&&(m.column=p.w,m.disableOneColumnMode=!0,f=!0);let b=p.el.querySelector(".grid-stack-item-content");p.subGrid=a.addGrid(b,p.subGrid),f&&(p.subGrid._autoColumn=!0)}return this._triggerAddEvent(),this._triggerChangeEvent(),d}save(s=!0,l=!1){let h=this.engine.save(s);if(h.forEach(d=>{if(s&&d.el&&!d.subGrid){let g=d.el.querySelector(".grid-stack-item-content");d.content=g?g.innerHTML:void 0,d.content||delete d.content}else s||delete d.content,d.subGrid&&(d.subGrid=d.subGrid.save(s,!0));delete d.el}),l){let d=r.Utils.cloneDeep(this.opts);return d.marginBottom===d.marginTop&&d.marginRight===d.marginLeft&&d.marginTop===d.marginRight&&(d.margin=d.marginTop,delete d.marginTop,delete d.marginRight,delete d.marginBottom,delete d.marginLeft),d.rtl===(this.el.style.direction==="rtl")&&(d.rtl="auto"),this._isAutoCellHeight&&(d.cellHeight="auto"),this._autoColumn&&(d.column="auto",delete d.disableOneColumnMode),r.Utils.removeInternalAndSame(d,o),d.children=h,d}return h}load(s,l=!0){let h=a.Utils.sort([...s],-1,this._prevColumn||this.getColumn());this._insertNotAppend=!0,this._prevColumn&&this._prevColumn!==this.opts.column&&h.some(g=>g.x+g.w>this.opts.column)&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(h,this._prevColumn,!0));let d=[];return this.batchUpdate(),l&&[...this.engine.nodes].forEach(p=>{h.find(m=>p.id===m.id)||(typeof l=="function"?l(this,p,!1):(d.push(p),this.removeWidget(p.el,!0,!1)))}),h.forEach(g=>{let p=g.id||g.id===0?this.engine.nodes.find(f=>f.id===g.id):void 0;if(p){if(this.update(p.el,g),g.subGrid&&g.subGrid.children){let f=p.el.querySelector(".grid-stack");f&&f.gridstack&&(f.gridstack.load(g.subGrid.children),this._insertNotAppend=!0)}}else l&&(typeof l=="function"?g=l(this,g,!0).gridstackNode:g=this.addWidget(g).gridstackNode)}),this.engine.removedNodes=d,this.commit(),delete this._ignoreLayoutsNodeChange,delete this._insertNotAppend,this}batchUpdate(){return this.engine.batchUpdate(),this}getCellHeight(s=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!s||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;let l=this.el.querySelector("."+this.opts.itemClass);if(l){let d=r.Utils.toNumber(l.getAttribute("gs-h"));return Math.round(l.offsetHeight/d)}let h=parseInt(this.el.getAttribute("gs-current-row"));return h?Math.round(this.el.getBoundingClientRect().height/h):this.opts.cellHeight}cellHeight(s,l=!0){if(l&&s!==void 0&&this._isAutoCellHeight!==(s==="auto")&&(this._isAutoCellHeight=s==="auto",this._updateWindowResizeEvent()),(s==="initial"||s==="auto")&&(s=void 0),s===void 0){let d=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;s=this.cellWidth()+d}let h=r.Utils.parseHeight(s);return this.opts.cellHeightUnit===h.unit&&this.opts.cellHeight===h.h?this:(this.opts.cellHeightUnit=h.unit,this.opts.cellHeight=h.h,l&&this._updateStyles(!0,this.getRow()),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(){return this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}commit(){return this.engine.commit(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent(),this}compact(){return this.engine.compact(),this._triggerChangeEvent(),this}column(s,l="moveScale"){if(s<1||this.opts.column===s)return this;let h=this.getColumn();s===1?this._prevColumn=h:delete this._prevColumn,this.el.classList.remove("grid-stack-"+h),this.el.classList.add("grid-stack-"+s),this.opts.column=this.engine.column=s;let d;return s===1&&this.opts.oneColumnModeDomSort&&(d=[],this.getGridItems().forEach(g=>{g.gridstackNode&&d.push(g.gridstackNode)}),d.length||(d=void 0)),this.engine.updateNodeWidths(h,s,d,l),this._isAutoCellHeight&&this.cellHeight(),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(s=>s.matches("."+this.opts.itemClass)&&!s.matches("."+this.opts.placeholderClass))}destroy(s=!0){if(!!this.el)return this._updateWindowResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),s?this.el.parentNode.removeChild(this.el):(this.removeAll(s),this.el.classList.remove(this.opts._styleSheetClass)),this._removeStylesheet(),this.el.removeAttribute("gs-current-row"),delete this.opts._isNested,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(s){return this.engine.float=s,this._triggerChangeEvent(),this}getFloat(){return this.engine.float}getCellFromPixel(s,l=!1){let h=this.el.getBoundingClientRect(),d;l?d={top:h.top+document.documentElement.scrollTop,left:h.left}:d={top:this.el.offsetTop,left:this.el.offsetLeft};let g=s.left-d.left,p=s.top-d.top,f=h.width/this.getColumn(),m=h.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(g/f),y:Math.floor(p/m)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(s,l,h,d){return this.engine.isAreaEmpty(s,l,h,d)}makeWidget(s){let l=a.getElement(s);return this._prepareElement(l,!0),this._updateContainerHeight(),this._triggerAddEvent(),this._triggerChangeEvent(),l}on(s,l){return s.indexOf(" ")!==-1?(s.split(" ").forEach(d=>this.on(d,l)),this):(s==="change"||s==="added"||s==="removed"||s==="enable"||s==="disable"?(s==="enable"||s==="disable"?this._gsEventHandler[s]=d=>l(d):this._gsEventHandler[s]=d=>l(d,d.detail),this.el.addEventListener(s,this._gsEventHandler[s])):s==="drag"||s==="dragstart"||s==="dragstop"||s==="resizestart"||s==="resize"||s==="resizestop"||s==="dropped"?this._gsEventHandler[s]=l:console.log("GridStack.on("+s+') event not supported, but you can still use $(".grid-stack").on(...) while jquery-ui is still used internally.'),this)}off(s){return s.indexOf(" ")!==-1?(s.split(" ").forEach(h=>this.off(h)),this):((s==="change"||s==="added"||s==="removed"||s==="enable"||s==="disable")&&this._gsEventHandler[s]&&this.el.removeEventListener(s,this._gsEventHandler[s]),delete this._gsEventHandler[s],this)}removeWidget(s,l=!0,h=!0){return a.getElements(s).forEach(d=>{if(d.parentElement!==this.el)return;let g=d.gridstackNode;g||(g=this.engine.nodes.find(p=>d===p.el)),g&&(delete d.gridstackNode,n.GridStackDDI.get().remove(d),this.engine.removeNode(g,l,h),l&&d.parentElement&&d.remove())}),h&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(s=!0){return this.engine.nodes.forEach(l=>{delete l.el.gridstackNode,n.GridStackDDI.get().remove(l.el)}),this.engine.removeAll(s),this._triggerRemoveEvent(),this}setAnimation(s){return s?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}setStatic(s,l=!0){return this.opts.staticGrid===s?this:(this.opts.staticGrid=s,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(h=>this._prepareDragDropByNode(h)),l&&this._setStaticClass(),this)}update(s,l){if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");let h=arguments,d=1;return l={x:h[d++],y:h[d++],w:h[d++],h:h[d++]},this.update(s,l)}return a.getElements(s).forEach(h=>{if(!h||!h.gridstackNode)return;let d=h.gridstackNode,g=r.Utils.cloneDeep(l);delete g.autoPosition;let p=["x","y","w","h"],f;if(p.some(v=>g[v]!==void 0&&g[v]!==d[v])&&(f={},p.forEach(v=>{f[v]=g[v]!==void 0?g[v]:d[v],delete g[v]})),!f&&(g.minW||g.minH||g.maxW||g.maxH)&&(f={}),g.content){let v=h.querySelector(".grid-stack-item-content");v&&v.innerHTML!==g.content&&(v.innerHTML=g.content),delete g.content}let m=!1,b=!1;for(const v in g)v[0]!=="_"&&d[v]!==g[v]&&(d[v]=g[v],m=!0,b=b||!this.opts.staticGrid&&(v==="noResize"||v==="noMove"||v==="locked"));f&&(this.engine.cleanNodes().beginUpdate(d).moveNode(d,f),this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()),m&&this._writeAttr(h,d),b&&this._prepareDragDropByNode(d)}),this}margin(s){if(!(typeof s=="string"&&s.split(" ").length>1)){let h=r.Utils.parseHeight(s);if(this.opts.marginUnit===h.unit&&this.opts.margin===h.h)return}return this.opts.margin=s,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(s){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");let l=arguments,h=0,d={x:l[h++],y:l[h++],w:l[h++],h:l[h++],autoPosition:l[h++]};return this.willItFit(d)}return this.engine.willItFit(s)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let s=this.engine.getDirtyNodes(!0);return s&&s.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(s),this._triggerEvent("change",s)),this.engine.saveInitial(),this}_triggerAddEvent(){return this.engine.batchMode?this:(this.engine.addedNodes&&this.engine.addedNodes.length>0&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(s=>{delete s._dirty}),this._triggerEvent("added",this.engine.addedNodes),this.engine.addedNodes=[]),this)}_triggerRemoveEvent(){return this.engine.batchMode?this:(this.engine.removedNodes&&this.engine.removedNodes.length>0&&(this._triggerEvent("removed",this.engine.removedNodes),this.engine.removedNodes=[]),this)}_triggerEvent(s,l){let h=l?new CustomEvent(s,{bubbles:!1,detail:l}):new Event(s);return this.el.dispatchEvent(h),this}_removeStylesheet(){return this._styles&&(r.Utils.removeStylesheet(this._styles._id),delete this._styles),this}_updateStyles(s=!1,l){if(s&&this._removeStylesheet(),this._updateContainerHeight(),this.opts.cellHeight===0)return this;let h=this.opts.cellHeight,d=this.opts.cellHeightUnit,g=`.${this.opts._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){let p="gridstack-style-"+(Math.random()*1e5).toFixed(),f=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=r.Utils.createStylesheet(p,f),!this._styles)return this;this._styles._id=p,this._styles._max=0,r.Utils.addCSSRule(this._styles,g,`min-height: ${h}${d}`);let m=this.opts.marginTop+this.opts.marginUnit,b=this.opts.marginBottom+this.opts.marginUnit,v=this.opts.marginRight+this.opts.marginUnit,x=this.opts.marginLeft+this.opts.marginUnit,B=`${g} > .grid-stack-item-content`,gt=`.${this.opts._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;r.Utils.addCSSRule(this._styles,B,`top: ${m}; right: ${v}; bottom: ${b}; left: ${x};`),r.Utils.addCSSRule(this._styles,gt,`top: ${m}; right: ${v}; bottom: ${b}; left: ${x};`),r.Utils.addCSSRule(this._styles,`${g} > .ui-resizable-ne`,`right: ${v}`),r.Utils.addCSSRule(this._styles,`${g} > .ui-resizable-e`,`right: ${v}`),r.Utils.addCSSRule(this._styles,`${g} > .ui-resizable-se`,`right: ${v}; bottom: ${b}`),r.Utils.addCSSRule(this._styles,`${g} > .ui-resizable-nw`,`left: ${x}`),r.Utils.addCSSRule(this._styles,`${g} > .ui-resizable-w`,`left: ${x}`),r.Utils.addCSSRule(this._styles,`${g} > .ui-resizable-sw`,`left: ${x}; bottom: ${b}`)}if(l=l||this._styles._max,l>this._styles._max){let p=f=>h*f+d;for(let f=this._styles._max+1;f<=l;f++){let m=p(f);r.Utils.addCSSRule(this._styles,`${g}[gs-y="${f-1}"]`,`top: ${p(f-1)}`),r.Utils.addCSSRule(this._styles,`${g}[gs-h="${f}"]`,`height: ${m}`),r.Utils.addCSSRule(this._styles,`${g}[gs-min-h="${f}"]`,`min-height: ${m}`),r.Utils.addCSSRule(this._styles,`${g}[gs-max-h="${f}"]`,`max-height: ${m}`)}this._styles._max=l}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let s=this.getRow()+this._extraDragRow;if(this.el.setAttribute("gs-current-row",String(s)),s===0)return this.el.style.removeProperty("height"),this;let l=this.opts.cellHeight,h=this.opts.cellHeightUnit;return l?(this.el.style.height=s*l+h,this):this}_prepareElement(s,l=!1,h){h||(s.classList.add(this.opts.itemClass),h=this._readAttr(s)),s.gridstackNode=h,h.el=s,h.grid=this;let d=Object.assign({},h);return h=this.engine.addNode(h,l),r.Utils.same(h,d)||this._writeAttr(s,h),this._prepareDragDropByNode(h),this}_writePosAttr(s,l){return l.x!==void 0&&l.x!==null&&s.setAttribute("gs-x",String(l.x)),l.y!==void 0&&l.y!==null&&s.setAttribute("gs-y",String(l.y)),l.w&&s.setAttribute("gs-w",String(l.w)),l.h&&s.setAttribute("gs-h",String(l.h)),this}_writeAttr(s,l){if(!l)return this;this._writePosAttr(s,l);let h={autoPosition:"gs-auto-position",minW:"gs-min-w",minH:"gs-min-h",maxW:"gs-max-w",maxH:"gs-max-h",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id",resizeHandles:"gs-resize-handles"};for(const d in h)l[d]?s.setAttribute(h[d],String(l[d])):s.removeAttribute(h[d]);return this}_readAttr(s){let l={};l.x=r.Utils.toNumber(s.getAttribute("gs-x")),l.y=r.Utils.toNumber(s.getAttribute("gs-y")),l.w=r.Utils.toNumber(s.getAttribute("gs-w")),l.h=r.Utils.toNumber(s.getAttribute("gs-h")),l.maxW=r.Utils.toNumber(s.getAttribute("gs-max-w")),l.minW=r.Utils.toNumber(s.getAttribute("gs-min-w")),l.maxH=r.Utils.toNumber(s.getAttribute("gs-max-h")),l.minH=r.Utils.toNumber(s.getAttribute("gs-min-h")),l.autoPosition=r.Utils.toBool(s.getAttribute("gs-auto-position")),l.noResize=r.Utils.toBool(s.getAttribute("gs-no-resize")),l.noMove=r.Utils.toBool(s.getAttribute("gs-no-move")),l.locked=r.Utils.toBool(s.getAttribute("gs-locked")),l.resizeHandles=s.getAttribute("gs-resize-handles"),l.id=s.getAttribute("gs-id");for(const h in l){if(!l.hasOwnProperty(h))return;!l[h]&&l[h]!==0&&delete l[h]}return l}_setStaticClass(){let s=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...s),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...s),this.el.removeAttribute("gs-static")),this}onParentResize(){if(!this.el||!this.el.clientWidth)return;let s=!1;if(this._autoColumn&&this.opts._isNested)this.opts.column!==this.opts._isNested.w&&(s=!0,this.column(this.opts._isNested.w,"none"));else{let l=!this.opts.disableOneColumnMode&&this.el.clientWidth<=this.opts.oneColumnSize;this.opts.column===1!==l&&(s=!0,this.opts.animate&&this.setAnimation(!1),this.column(l?1:this._prevColumn),this.opts.animate&&this.setAnimation(!0))}return this._isAutoCellHeight&&(!s&&this.opts.cellHeightThrottle?(this._cellHeightThrottle||(this._cellHeightThrottle=r.Utils.throttle(()=>this.cellHeight(),this.opts.cellHeightThrottle)),this._cellHeightThrottle()):this.cellHeight()),this.engine.nodes.forEach(l=>{l.subGrid&&l.subGrid.onParentResize()}),this}_updateWindowResizeEvent(s=!1){const l=(this._isAutoCellHeight||!this.opts.disableOneColumnMode)&&!this.opts._isNested;return!s&&l&&!this._windowResizeBind?(this._windowResizeBind=this.onParentResize.bind(this),window.addEventListener("resize",this._windowResizeBind)):(s||!l)&&this._windowResizeBind&&(window.removeEventListener("resize",this._windowResizeBind),delete this._windowResizeBind),this}static getElement(s=".grid-stack-item"){return r.Utils.getElement(s)}static getElements(s=".grid-stack-item"){return r.Utils.getElements(s)}static getGridElement(s){return a.getElement(s)}static getGridElements(s){return r.Utils.getElements(s)}_initMargin(){let s,l=0,h=[];return typeof this.opts.margin=="string"&&(h=this.opts.margin.split(" ")),h.length===2?(this.opts.marginTop=this.opts.marginBottom=h[0],this.opts.marginLeft=this.opts.marginRight=h[1]):h.length===4?(this.opts.marginTop=h[0],this.opts.marginRight=h[1],this.opts.marginBottom=h[2],this.opts.marginLeft=h[3]):(s=r.Utils.parseHeight(this.opts.margin),this.opts.marginUnit=s.unit,l=this.opts.margin=s.h),this.opts.marginTop===void 0?this.opts.marginTop=l:(s=r.Utils.parseHeight(this.opts.marginTop),this.opts.marginTop=s.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=l:(s=r.Utils.parseHeight(this.opts.marginBottom),this.opts.marginBottom=s.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=l:(s=r.Utils.parseHeight(this.opts.marginRight),this.opts.marginRight=s.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=l:(s=r.Utils.parseHeight(this.opts.marginLeft),this.opts.marginLeft=s.h,delete this.opts.margin),this.opts.marginUnit=s.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static setupDragIn(s,l){}movable(s,l){return this}resizable(s,l){return this}disable(){return this}enable(){return this}enableMove(s){return this}enableResize(s){return this}_setupAcceptWidget(){return this}_setupRemoveDrop(){return this}_prepareDragDropByNode(s){return this}_onStartMoving(s,l,h,d,g,p){}_dragOrResize(s,l,h,d,g,p){}_leave(s,l){}}u.GridStack=a,a.Utils=r.Utils,a.Engine=i.GridStackEngine})(xt);const Ce={class:"text-h5 q-mt-sm q-mb-xs"},Ne={class:"text-caption text-grey"},He=Et("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),ke=wt({__name:"WidgetPreview",props:{title:String,description:String,previewUrl:String,componentName:String},setup(u){return(t,e)=>(M(),lt(oe,{class:"my-card",flat:"",bordered:""},{default:O(()=>[k(ft,{horizontal:""},{default:O(()=>[k(ft,{class:"q-pt-xs"},{default:O(()=>[N("div",Ce,Mt(u.title),1),N("div",Ne,Mt(u.description),1)]),_:1}),k(ft,{class:"col-5 flex flex-center"},{default:O(()=>[k(le,{class:"rounded-borders",src:u.previewUrl},null,8,["src"]),k(yt,{class:"btn",flat:"",icon:"add"},{default:O(()=>[He]),_:1})]),_:1})]),_:1})]),_:1}))}});var Me=bt(ke,[["__scopeId","data-v-fbee2b1a"]]);var Oe={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.DDManager=void 0;class Ue{}F.DDManager=Ue;var nt={},at={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.DDResizableHandle=void 0;class dt{constructor(t,e,i){this.moving=!1,this.host=t,this.dir=e,this.option=i,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._init()}_init(){const t=document.createElement("div");return t.classList.add("ui-resizable-handle"),t.classList.add(`${dt.prefix}${this.dir}`),t.style.zIndex="100",t.style.userSelect="none",this.el=t,this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(t){t.preventDefault(),this.mouseDownEvent=t,document.addEventListener("mousemove",this._mouseMove,!0),document.addEventListener("mouseup",this._mouseUp)}_mouseMove(t){let e=this.mouseDownEvent;!this.moving&&Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>2?(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent)):this.moving&&this._triggerEvent("move",t)}_mouseUp(t){this.moving&&this._triggerEvent("stop",t),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp),delete this.moving,delete this.mouseDownEvent}_triggerEvent(t,e){return this.option[t]&&this.option[t](e),this}}ht.DDResizableHandle=dt;dt.prefix="ui-resizable-";var q={};Object.defineProperty(q,"__esModule",{value:!0});q.DDBaseImplement=void 0;class Ae{constructor(){this._disabled=!1,this._eventRegister={}}get disabled(){return this._disabled}on(t,e){this._eventRegister[t]=e}off(t){delete this._eventRegister[t]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(t,e){if(!this.disabled&&this._eventRegister&&this._eventRegister[t])return this._eventRegister[t](e)}}q.DDBaseImplement=Ae;var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.DDUtils=void 0;class It{static clone(t){const e=t.cloneNode(!0);return e.removeAttribute("id"),e}static appendTo(t,e){let i;typeof e=="string"?i=document.querySelector(e):i=e,i&&i.appendChild(t)}static setPositionRelative(t){/^(?:r|a|f)/.test(window.getComputedStyle(t).position)||(t.style.position="relative")}static addElStyles(t,e){if(e instanceof Object)for(const i in e)e.hasOwnProperty(i)&&(Array.isArray(e[i])?e[i].forEach(r=>{t.style[i]=r}):t.style[i]=e[i])}static initEvent(t,e){const i={type:e.type},r={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:e.target?e.target:t.target};return t.dataTransfer&&(i.dataTransfer=t.dataTransfer),["altKey","ctrlKey","metaKey","shiftKey"].forEach(n=>i[n]=t[n]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(n=>i[n]=t[n]),Object.assign(Object.assign({},i),r)}static inside(t,e){let i=t.relatedTarget||t.fromElement;if(!i){const{bottom:r,left:n,right:o,top:a}=e.getBoundingClientRect();return t.x<o&&t.x>n&&t.y<r&&t.y>a}return e.contains(i)}}Y.DDUtils=It;It.isEventSupportPassiveOption=(()=>{let u=!1,t=()=>{};return document.addEventListener("test",t,{get passive(){return u=!0,!0}}),document.removeEventListener("test",t),u})();Object.defineProperty(at,"__esModule",{value:!0});at.DDResizable=void 0;const Le=ht,Pe=q,_t=Y,Te=D;class J extends Pe.DDBaseImplement{constructor(t,e={}){super(),this._showHandlers=()=>{this.el.classList.remove("ui-resizable-autohide")},this._hideHandlers=()=>{this.el.classList.add("ui-resizable-autohide")},this._ui=()=>{const r=this.el.parentElement.getBoundingClientRect(),n={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},o=this.temporalRect||n;return{position:{left:o.left-r.left,top:o.top-r.top},size:{width:o.width,height:o.height}}},this.el=t,this.option=e,this.enable(),this._setupAutoHide(),this._setupHandlers()}on(t,e){super.on(t,e)}off(t){super.off(t)}enable(){super.enable(),this.el.classList.add("ui-resizable"),this.el.classList.remove("ui-resizable-disabled")}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this.el.classList.remove("ui-resizable")}destroy(){this._removeHandlers(),this.option.autoHide&&(this.el.removeEventListener("mouseover",this._showHandlers),this.el.removeEventListener("mouseout",this._hideHandlers)),this.el.classList.remove("ui-resizable"),delete this.el,super.destroy()}updateOption(t){let e=t.handles&&t.handles!==this.option.handles,i=t.autoHide&&t.autoHide!==this.option.autoHide;return Object.keys(t).forEach(r=>this.option[r]=t[r]),e&&(this._removeHandlers(),this._setupHandlers()),i&&this._setupAutoHide(),this}_setupAutoHide(){return this.option.autoHide?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._showHandlers),this.el.addEventListener("mouseout",this._hideHandlers)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._showHandlers),this.el.removeEventListener("mouseout",this._hideHandlers)),this}_setupHandlers(){let t=this.option.handles||"e,s,se";return t==="all"&&(t="n,e,s,w,se,sw,ne,nw"),this.handlers=t.split(",").map(e=>e.trim()).map(e=>new Le.DDResizableHandle(this.el,e,{start:i=>{this._resizeStart(i)},stop:i=>{this._resizeStop(i)},move:i=>{this._resizing(i,e)}})),this}_resizeStart(t){this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=Te.Utils.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=t,this._setupHelper(),this._applyChange();const e=_t.DDUtils.initEvent(t,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(e,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",e),this}_resizing(t,e){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(t,e),this._applyChange();const i=_t.DDUtils.initEvent(t,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(i,this._ui()),this.triggerEvent("resize",i),this}_resizeStop(t){const e=_t.DDUtils.initEvent(t,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(e),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",e),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){return this.elOriginStyleVal=J._originStyleProp.map(t=>this.el.style[t]),this.parentOriginStylePosition=this.el.parentElement.style.position,window.getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return J._originStyleProp.forEach((t,e)=>{this.el.style[t]=this.elOriginStyleVal[e]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(t,e){const i=this.startEvent,r={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},n=t.clientX-i.clientX,o=t.clientY-i.clientY;e.indexOf("e")>-1?r.width+=n:e.indexOf("w")>-1&&(r.width-=n,r.left+=n),e.indexOf("s")>-1?r.height+=o:e.indexOf("n")>-1&&(r.height-=o,r.top+=o);const a=this._constrainSize(r.width,r.height);return Math.round(r.width)!==Math.round(a.width)&&(e.indexOf("w")>-1&&(r.left+=r.width-a.width),r.width=a.width),Math.round(r.height)!==Math.round(a.height)&&(e.indexOf("n")>-1&&(r.top+=r.height-a.height),r.height=a.height),r}_constrainSize(t,e){const i=this.option.maxWidth||Number.MAX_SAFE_INTEGER,r=this.option.minWidth||t,n=this.option.maxHeight||Number.MAX_SAFE_INTEGER,o=this.option.minHeight||e,a=Math.min(i,Math.max(r,t)),c=Math.min(n,Math.max(o,e));return{width:a,height:c}}_applyChange(){let t={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){const e=this.el.parentElement,{left:i,top:r}=e.getBoundingClientRect();t={left:i,top:r,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(e=>{const i=this.temporalRect[e];this.el.style[e]=i-t[e]+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(t=>t.destroy()),delete this.handlers,this}}at.DDResizable=J;J._originStyleProp=["width","height","position","left","top","opacity","zIndex"];var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.DDDraggable=void 0;const Lt=F,W=Y,Be=q;class T extends Be.DDBaseImplement{constructor(t,e={}){super(),this.dragging=!1,this.ui=()=>{const n=this.el.parentElement.getBoundingClientRect(),o=this.helper.getBoundingClientRect();return{position:{top:o.top-n.top,left:o.left-n.left}}},this.el=t,this.option=e;let i=e.handle.substring(1);this.dragEl=t.classList.contains(i)?t:t.querySelector(e.handle)||t,this._dragStart=this._dragStart.bind(this),this._drag=this._drag.bind(this),this._dragEnd=this._dragEnd.bind(this),this.enable()}on(t,e){super.on(t,e)}off(t){super.off(t)}enable(){super.enable(),this.dragEl.draggable=!0,this.dragEl.addEventListener("dragstart",this._dragStart),this.el.classList.remove("ui-draggable-disabled"),this.el.classList.add("ui-draggable")}disable(t=!1){super.disable(),this.dragEl.removeAttribute("draggable"),this.dragEl.removeEventListener("dragstart",this._dragStart),this.el.classList.remove("ui-draggable"),t||this.el.classList.add("ui-draggable-disabled")}destroy(){this.dragging&&this._dragEnd({}),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(t){return Object.keys(t).forEach(e=>this.option[e]=t[e]),this}_dragStart(t){Lt.DDManager.dragElement=this,this.helper=this._createHelper(t),this._setupHelperContainmentStyle(),this.dragOffset=this._getDragOffset(t,this.el,this.helperContainment);const e=W.DDUtils.initEvent(t,{target:this.el,type:"dragstart"});this.helper!==this.el?(this._setupDragFollowNodeNotifyStart(e),this._dragFollow(t)):this.dragFollowTimer=window.setTimeout(()=>{delete this.dragFollowTimer,this._setupDragFollowNodeNotifyStart(e)},0),this._cancelDragGhost(t)}_setupDragFollowNodeNotifyStart(t){return this._setupHelperStyle(),document.addEventListener("dragover",this._drag,T.dragEventListenerOption),this.dragEl.addEventListener("dragend",this._dragEnd),this.option.start&&this.option.start(t,this.ui()),this.dragging=!0,this.helper.classList.add("ui-draggable-dragging"),this.triggerEvent("dragstart",t),this}_drag(t){t.preventDefault(),this._dragFollow(t);const e=W.DDUtils.initEvent(t,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(e,this.ui()),this.triggerEvent("drag",e)}_dragEnd(t){if(this.dragFollowTimer){clearTimeout(this.dragFollowTimer),delete this.dragFollowTimer;return}else this.paintTimer&&cancelAnimationFrame(this.paintTimer),document.removeEventListener("dragover",this._drag,T.dragEventListenerOption),this.dragEl.removeEventListener("dragend",this._dragEnd);this.dragging=!1,this.helper.classList.remove("ui-draggable-dragging"),this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();const e=W.DDUtils.initEvent(t,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(e),this.triggerEvent("dragstop",e),delete Lt.DDManager.dragElement,delete this.helper}_createHelper(t){let e=this.el;return typeof this.option.helper=="function"?e=this.option.helper(t):this.option.helper==="clone"&&(e=W.DDUtils.clone(this.el)),document.body.contains(e)||W.DDUtils.appendTo(e,this.option.appendTo==="parent"?this.el.parentNode:this.option.appendTo),e===this.el&&(this.dragElementOriginStyle=T.originStyleProp.map(i=>this.el.style[i])),e}_setupHelperStyle(){const t=this.helper.getBoundingClientRect(),e=this.helper.style;return e.pointerEvents="none",e["min-width"]=0,e.width=this.dragOffset.width+"px",e.height=this.dragOffset.height+"px",e.willChange="left, top",e.position="fixed",e.left=t.left+"px",e.top=t.top+"px",e.transition="none",setTimeout(()=>{this.helper&&(e.transition=null)},0),this}_removeHelperStyle(){var t;let e=(t=this.helper)===null||t===void 0?void 0:t.gridstackNode;if(this.dragElementOriginStyle&&(!e||!e._isAboutToRemove)){let i=this.helper,r=this.dragElementOriginStyle.transition||null;i.style.transition=this.dragElementOriginStyle.transition="none",T.originStyleProp.forEach(n=>i.style[n]=this.dragElementOriginStyle[n]||null),setTimeout(()=>i.style.transition=r,50)}return delete this.dragElementOriginStyle,this}_dragFollow(t){this.paintTimer&&cancelAnimationFrame(this.paintTimer),this.paintTimer=requestAnimationFrame(()=>{delete this.paintTimer;const e=this.dragOffset;let i={left:0,top:0};if(this.helper.style.position==="absolute"){const{left:r,top:n}=this.helperContainment.getBoundingClientRect();i={left:r,top:n}}this.helper.style.left=t.clientX+e.offsetLeft-i.left+"px",this.helper.style.top=t.clientY+e.offsetTop-i.top+"px"})}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,window.getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_cancelDragGhost(t){let e=document.createElement("div");return e.style.width="1px",e.style.height="1px",e.style.position="fixed",document.body.appendChild(e),t.dataTransfer.setDragImage(e,0,0),setTimeout(()=>document.body.removeChild(e)),t.stopPropagation(),this}_getDragOffset(t,e,i){let r=0,n=0;if(i){const a=document.createElement("div");W.DDUtils.addElStyles(a,{opacity:"0",position:"fixed",top:0+"px",left:0+"px",width:"1px",height:"1px",zIndex:"-999999"}),i.appendChild(a);const c=a.getBoundingClientRect();i.removeChild(a),r=c.left,n=c.top}const o=e.getBoundingClientRect();return{left:o.left,top:o.top,offsetLeft:-t.clientX+o.left-r,offsetTop:-t.clientY+o.top-n,width:o.width,height:o.height}}}ut.DDDraggable=T;T.dragEventListenerOption=!0;T.originStyleProp=["transition","pointerEvents","position","left","top","opacity","zIndex","width","height","willChange","min-width"];var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.DDDroppable=void 0;const G=F,Ie=q,V=Y;class A extends Ie.DDBaseImplement{constructor(t,e={}){super(),this.el=t,this.option=e,this._dragEnter=this._dragEnter.bind(this),this._dragOver=this._dragOver.bind(this),this._dragLeave=this._dragLeave.bind(this),this._drop=this._drop.bind(this),this.el.classList.add("ui-droppable"),this.el.addEventListener("dragenter",this._dragEnter),this._setupAccept()}on(t,e){super.on(t,e)}off(t){super.off(t)}enable(){!this.disabled||(super.enable(),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("dragenter",this._dragEnter))}disable(t=!1){this.disabled||(super.disable(),t||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("dragenter",this._dragEnter))}destroy(){this._removeLeaveCallbacks(),this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(t){return Object.keys(t).forEach(e=>this.option[e]=t[e]),this._setupAccept(),this}_dragEnter(t){if(!this._canDrop()||(t.preventDefault(),t.stopPropagation(),this.moving))return;this.moving=!0;const e=V.DDUtils.initEvent(t,{target:this.el,type:"dropover"});this.option.over&&this.option.over(e,this._ui(G.DDManager.dragElement)),this.triggerEvent("dropover",e),this.el.addEventListener("dragover",this._dragOver),this.el.addEventListener("drop",this._drop),this.el.addEventListener("dragleave",this._dragLeave),A.lastActive&&A.lastActive!==this&&A.lastActive._dragLeave(t,!0),A.lastActive=this}_dragOver(t){t.preventDefault(),t.stopPropagation()}_dragLeave(t,e){var i;if(t.preventDefault(),t.stopPropagation(),!e){let r=V.DDUtils.inside(t,this.el),n=G.DDManager.dragElement.el;if(r&&!(!((i=n.gridstackNode)===null||i===void 0)&&i.subGrid)&&(r=!this.el.gridstack.engine.nodes.filter(a=>a.subGrid).map(a=>a.subGrid.el).some(a=>V.DDUtils.inside(t,a))),r)return}if(this.moving){const r=V.DDUtils.initEvent(t,{target:this.el,type:"dropout"});this.option.out&&this.option.out(r,this._ui(G.DDManager.dragElement)),this.triggerEvent("dropout",r)}this._removeLeaveCallbacks(),A.lastActive===this&&delete A.lastActive}_drop(t){if(!this.moving)return;t.preventDefault();const e=V.DDUtils.initEvent(t,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(e,this._ui(G.DDManager.dragElement)),this.triggerEvent("drop",e),this._removeLeaveCallbacks()}_removeLeaveCallbacks(){!this.moving||(delete this.moving,this.el.removeEventListener("dragover",this._dragOver),this.el.removeEventListener("drop",this._drop),this.el.removeEventListener("dragleave",this._dragLeave))}_canDrop(){return G.DDManager.dragElement&&(!this.accept||this.accept(G.DDManager.dragElement.el))}_setupAccept(){return this.option.accept&&typeof this.option.accept=="string"?this.accept=t=>t.matches(this.option.accept):this.accept=this.option.accept,this}_ui(t){return Object.assign({draggable:t.el},t.ui())}}ct.DDDroppable=A;Object.defineProperty(nt,"__esModule",{value:!0});nt.DDElement=void 0;const je=at,We=ut,Ge=ct;class Dt{constructor(t){this.el=t}static init(t){return t.ddElement||(t.ddElement=new Dt(t)),t.ddElement}on(t,e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(t)>-1?this.ddDraggable.on(t,e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(t)>-1?this.ddDroppable.on(t,e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(t)>-1&&this.ddResizable.on(t,e),this}off(t){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(t)>-1?this.ddDraggable.off(t):this.ddDroppable&&["drop","dropover","dropout"].indexOf(t)>-1?this.ddDroppable.off(t):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(t)>-1&&this.ddResizable.off(t),this}setupDraggable(t){return this.ddDraggable?this.ddDraggable.updateOption(t):this.ddDraggable=new We.DDDraggable(this.el,t),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(t){return this.ddResizable?this.ddResizable.updateOption(t):this.ddResizable=new je.DDResizable(this.el,t),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(t){return this.ddDroppable?this.ddDroppable.updateOption(t):this.ddDroppable=new Ge.DDDroppable(this.el,t),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}nt.DDElement=Dt;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.GridStackDD=void 0;const Pt=$,R=xt,U=D;class C extends Pt.GridStackDDI{static get(){return Pt.GridStackDDI.get()}remove(t){return this.draggable(t,"destroy").resizable(t,"destroy"),t.gridstackNode&&delete t.gridstackNode._initDD,this}}Z.GridStackDD=C;R.GridStack.prototype._setupAcceptWidget=function(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return C.get().droppable(this.el,"destroy"),this;let u,t,e=(i,r,n)=>{let o=r.gridstackNode;if(!o)return;n=n||r;let a=this.el.getBoundingClientRect(),{top:c,left:s}=n.getBoundingClientRect();s-=a.left,c-=a.top;let l={position:{top:c,left:s}};if(o._temporaryRemoved){if(o.x=Math.max(0,Math.round(s/t)),o.y=Math.max(0,Math.round(c/u)),delete o.autoPosition,this.engine.nodeBoundFix(o),!this.engine.willItFit(o)){if(o.autoPosition=!0,!this.engine.willItFit(o)){C.get().off(r,"drag");return}o._willFitPos&&(U.Utils.copyPos(o,o._willFitPos),delete o._willFitPos)}this._onStartMoving(n,i,l,o,t,u)}else this._dragOrResize(n,i,l,o,t,u)};return C.get().droppable(this.el,{accept:i=>{let r=i.gridstackNode;if((r==null?void 0:r.grid)===this)return!0;if(!this.opts.acceptWidgets||r!=null&&r.subGrid)return!1;let n=!0;if(typeof this.opts.acceptWidgets=="function")n=this.opts.acceptWidgets(i);else{let o=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;n=i.matches(o)}if(n&&r&&this.opts.maxRow){let o={w:r.w,h:r.h,minW:r.minW,minH:r.minH};n=this.engine.willItFit(o)}return n}}).on(this.el,"dropover",(i,r,n)=>{let o=r.gridstackNode;if((o==null?void 0:o.grid)===this&&!o._temporaryRemoved)return!1;(o==null?void 0:o.grid)&&o.grid!==this&&!o._temporaryRemoved&&o.grid._leave(r,n),t=this.cellWidth(),u=this.getCellHeight(!0),o||(o=this._readAttr(r)),o.grid||(o._isExternal=!0,r.gridstackNode=o),n=n||r;let a=o.w||Math.round(n.offsetWidth/t)||1,c=o.h||Math.round(n.offsetHeight/u)||1;return o.grid&&o.grid!==this?(r._gridstackNodeOrig||(r._gridstackNodeOrig=o),r.gridstackNode=o=Object.assign(Object.assign({},o),{w:a,h:c,grid:this}),this.engine.cleanupNode(o).nodeBoundFix(o),o._initDD=o._isExternal=o._temporaryRemoved=!0):(o.w=a,o.h=c,o._temporaryRemoved=!0),ot(o.el,!1),C.get().on(r,"drag",e),e(i,r,n),!1}).on(this.el,"dropout",(i,r,n)=>{let o=r.gridstackNode;return o&&(!o.grid||o.grid===this)&&this._leave(r,n),!1}).on(this.el,"drop",(i,r,n)=>{let o=r.gridstackNode;if((o==null?void 0:o.grid)===this&&!o._isExternal)return!1;let a=!!this.placeholder.parentElement;this.placeholder.remove();let c=r._gridstackNodeOrig;if(delete r._gridstackNodeOrig,a&&c&&c.grid&&c.grid!==this){let s=c.grid;s.engine.removedNodes.push(c),s._triggerRemoveEvent()}return!o||(a&&(this.engine.cleanupNode(o),o.grid=this),C.get().off(r,"drag"),n!==r?(n.remove(),r.gridstackNode=c,a&&(r=r.cloneNode(!0))):(r.remove(),C.get().remove(r)),!a)||(r.gridstackNode=o,o.el=r,U.Utils.copyPos(o,this._readAttr(this.placeholder)),U.Utils.removePositioningStyles(r),this._writeAttr(r,o),this.el.appendChild(r),this._updateContainerHeight(),this.engine.addedNodes.push(o),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped(Object.assign(Object.assign({},i),{type:"dropped"}),c&&c.grid?c:void 0,o),window.setTimeout(()=>{o.el&&o.el.parentElement?this._prepareDragDropByNode(o):this.engine.removeNode(o)})),!1}),this};function ot(u,t){let e=u?u.gridstackNode:void 0;!e||!e.grid||(t?e._isAboutToRemove=!0:delete e._isAboutToRemove,t?u.classList.add("grid-stack-item-removing"):u.classList.remove("grid-stack-item-removing"))}R.GridStack.prototype._setupRemoveDrop=function(){if(!this.opts.staticGrid&&typeof this.opts.removable=="string"){let u=document.querySelector(this.opts.removable);if(!u)return this;C.get().isDroppable(u)||C.get().droppable(u,this.opts.removableOptions).on(u,"dropover",(t,e)=>ot(e,!0)).on(u,"dropout",(t,e)=>ot(e,!1))}return this};R.GridStack.setupDragIn=function(u,t){let e,i;const r={revert:"invalid",handle:".grid-stack-item-content",scroll:!1,appendTo:"body"};if(u&&(e=u,i=Object.assign(Object.assign({},r),t||{})),typeof e!="string")return;let n=C.get();U.Utils.getElements(e).forEach(o=>{n.isDraggable(o)||n.dragIn(o,i)})};R.GridStack.prototype._prepareDragDropByNode=function(u){let t=u.el,e=C.get();if(this.opts.staticGrid||(u.noMove||this.opts.disableDrag)&&(u.noResize||this.opts.disableResize))return u._initDD&&(e.remove(t),delete u._initDD),t.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!u._initDD){let i,r,n=(c,s)=>{this._gsEventHandler[c.type]&&this._gsEventHandler[c.type](c,c.target),i=this.cellWidth(),r=this.getCellHeight(!0),this._onStartMoving(t,c,s,u,i,r)},o=(c,s)=>{this._dragOrResize(t,c,s,u,i,r)},a=c=>{this.placeholder.remove(),delete u._moving,delete u._lastTried;let s=c.target;if(!(!s.gridstackNode||s.gridstackNode.grid!==this)){if(u.el=s,u._isAboutToRemove){let l=t.gridstackNode.grid;l._gsEventHandler[c.type]&&l._gsEventHandler[c.type](c,s),e.remove(t),l.engine.removedNodes.push(u),l._triggerRemoveEvent(),delete t.gridstackNode,delete u.el,t.remove()}else u._temporaryRemoved?(U.Utils.removePositioningStyles(s),U.Utils.copyPos(u,u._orig),this._writePosAttr(s,u),this.engine.addNode(u)):(U.Utils.removePositioningStyles(s),this._writePosAttr(s,u)),this._gsEventHandler[c.type]&&this._gsEventHandler[c.type](c,s);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()}};e.draggable(t,{start:n,stop:a,drag:o}).resizable(t,{start:n,stop:a,resize:o}),u._initDD=!0}return u.noMove||this.opts.disableDrag?(e.draggable(t,"disable"),t.classList.add("ui-draggable-disabled")):(e.draggable(t,"enable"),t.classList.remove("ui-draggable-disabled")),u.noResize||this.opts.disableResize?(e.resizable(t,"disable"),t.classList.add("ui-resizable-disabled")):(e.resizable(t,"enable"),t.classList.remove("ui-resizable-disabled")),this};R.GridStack.prototype._onStartMoving=function(u,t,e,i,r,n){if(this.engine.cleanNodes().beginUpdate(i),this._writePosAttr(this.placeholder,i),this.el.appendChild(this.placeholder),i.el=this.placeholder,i._lastUiPosition=e.position,i._prevYPix=e.position.top,i._moving=t.type==="dragstart",delete i._lastTried,t.type==="dropover"&&i._temporaryRemoved&&(this.engine.addNode(i),i._moving=!0),this.engine.cacheRects(r,n,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),t.type==="resizestart"){let o=C.get().resizable(u,"option","minWidth",r*(i.minW||1)).resizable(u,"option","minHeight",n*(i.minH||1));i.maxW&&o.resizable(u,"option","maxWidth",r*i.maxW),i.maxH&&o.resizable(u,"option","maxHeight",n*i.maxH)}};R.GridStack.prototype._leave=function(u,t){let e=u.gridstackNode;!e||(C.get().off(u,"drag"),!e._temporaryRemoved&&(e._temporaryRemoved=!0,this.engine.removeNode(e),e.el=e._isExternal&&t?t:u,this.opts.removable===!0&&ot(u,!0),u._gridstackNodeOrig?(u.gridstackNode=u._gridstackNodeOrig,delete u._gridstackNodeOrig):e._isExternal&&(delete e.el,delete u.gridstackNode,this.engine.restoreInitial())))};R.GridStack.prototype._dragOrResize=function(u,t,e,i,r,n){let o=Object.assign({},i._orig),a,c=this.opts.marginLeft,s=this.opts.marginRight,l=this.opts.marginTop,h=this.opts.marginBottom,d=Math.round(n*.1),g=Math.round(r*.1);if(c=Math.min(c,g),s=Math.min(s,g),l=Math.min(l,d),h=Math.min(h,d),t.type==="drag"){if(i._temporaryRemoved)return;let f=e.position.top-i._prevYPix;i._prevYPix=e.position.top,U.Utils.updateScrollPosition(u,e.position,f);let m=e.position.left+(e.position.left>i._lastUiPosition.left?-s:c),b=e.position.top+(e.position.top>i._lastUiPosition.top?-h:l);o.x=Math.round(m/r),o.y=Math.round(b/n);let v=this._extraDragRow;if(this.engine.collide(i,o)){let x=this.getRow(),B=Math.max(0,o.y+i.h-x);this.opts.maxRow&&x+B>this.opts.maxRow&&(B=Math.max(0,this.opts.maxRow-x)),this._extraDragRow=B}else this._extraDragRow=0;if(this._extraDragRow!==v&&this._updateContainerHeight(),i.x===o.x&&i.y===o.y)return}else if(t.type==="resize"){if(o.x<0||(U.Utils.updateScrollResize(t,u,n),o.w=Math.round((e.size.width-c)/r),o.h=Math.round((e.size.height-l)/n),i.w===o.w&&i.h===o.h)||i._lastTried&&i._lastTried.w===o.w&&i._lastTried.h===o.h)return;let f=e.position.left+c,m=e.position.top+l;o.x=Math.round(f/r),o.y=Math.round(m/n),a=!0}i._lastTried=o;let p={x:e.position.left+c,y:e.position.top+l,w:(e.size?e.size.width:i.w*r)-c-s,h:(e.size?e.size.height:i.h*n)-l-h};if(this.engine.moveNodeCheck(i,Object.assign(Object.assign({},o),{cellWidth:r,cellHeight:n,rect:p,resizing:a}))){i._lastUiPosition=e.position,this.engine.cacheRects(r,n,l,s,h,c),delete i._skipDown,a&&i.subGrid&&i.subGrid.onParentResize(),this._extraDragRow=0,this._updateContainerHeight();let f=t.target;this._writePosAttr(f,i),this._gsEventHandler[t.type]&&this._gsEventHandler[t.type](t,f)}};R.GridStack.prototype.movable=function(u,t){return this.opts.staticGrid?this:(R.GridStack.getElements(u).forEach(e=>{let i=e.gridstackNode;!i||(t?delete i.noMove:i.noMove=!0,this._prepareDragDropByNode(i))}),this)};R.GridStack.prototype.resizable=function(u,t){return this.opts.staticGrid?this:(R.GridStack.getElements(u).forEach(e=>{let i=e.gridstackNode;!i||(t?delete i.noResize:i.noResize=!0,this._prepareDragDropByNode(i))}),this)};R.GridStack.prototype.disable=function(){if(!this.opts.staticGrid)return this.enableMove(!1),this.enableResize(!1),this._triggerEvent("disable"),this};R.GridStack.prototype.enable=function(){if(!this.opts.staticGrid)return this.enableMove(!0),this.enableResize(!0),this._triggerEvent("enable"),this};R.GridStack.prototype.enableMove=function(u){return this.opts.staticGrid?this:(this.opts.disableDrag=!u,this.engine.nodes.forEach(t=>this.movable(t.el,u)),this)};R.GridStack.prototype.enableResize=function(u){return this.opts.staticGrid?this:(this.opts.disableResize=!u,this.engine.nodes.forEach(t=>this.resizable(t.el,u)),this)};(function(u){var t=P&&P.__createBinding||(Object.create?function(c,s,l,h){h===void 0&&(h=l),Object.defineProperty(c,h,{enumerable:!0,get:function(){return s[l]}})}:function(c,s,l,h){h===void 0&&(h=l),c[h]=s[l]}),e=P&&P.__exportStar||function(c,s){for(var l in c)l!=="default"&&!s.hasOwnProperty(l)&&t(s,c,l)};Object.defineProperty(u,"__esModule",{value:!0}),u.GridStackDDNative=void 0;const i=F,r=nt,n=Z,o=D;e(Z,u);class a extends n.GridStackDD{resizable(s,l,h,d){return this._getDDElements(s).forEach(g=>{if(l==="disable"||l==="enable")g.ddResizable&&g.ddResizable[l]();else if(l==="destroy")g.ddResizable&&g.cleanResizable();else if(l==="option")g.setupResizable({[h]:d});else{const p=g.el.gridstackNode.grid;let f=g.el.getAttribute("gs-resize-handles")?g.el.getAttribute("gs-resize-handles"):p.opts.resizable.handles;g.setupResizable(Object.assign(Object.assign(Object.assign({},p.opts.resizable),{handles:f}),{start:l.start,stop:l.stop,resize:l.resize}))}}),this}draggable(s,l,h,d){return this._getDDElements(s).forEach(g=>{if(l==="disable"||l==="enable")g.ddDraggable&&g.ddDraggable[l]();else if(l==="destroy")g.ddDraggable&&g.cleanDraggable();else if(l==="option")g.setupDraggable({[h]:d});else{const p=g.el.gridstackNode.grid;g.setupDraggable(Object.assign(Object.assign({},p.opts.draggable),{containment:p.opts._isNested&&!p.opts.dragOut?p.el.parentElement:p.opts.draggable.containment||null,start:l.start,stop:l.stop,drag:l.drag}))}}),this}dragIn(s,l){return this._getDDElements(s).forEach(h=>h.setupDraggable(l)),this}droppable(s,l,h,d){return typeof l.accept=="function"&&!l._accept&&(l._accept=l.accept,l.accept=g=>l._accept(g)),this._getDDElements(s).forEach(g=>{l==="disable"||l==="enable"?g.ddDroppable&&g.ddDroppable[l]():l==="destroy"?g.ddDroppable&&g.cleanDroppable():l==="option"?g.setupDroppable({[h]:d}):g.setupDroppable(l)}),this}isDroppable(s){return!!(s&&s.ddElement&&s.ddElement.ddDroppable&&!s.ddElement.ddDroppable.disabled)}isDraggable(s){return!!(s&&s.ddElement&&s.ddElement.ddDraggable&&!s.ddElement.ddDraggable.disabled)}isResizable(s){return!!(s&&s.ddElement&&s.ddElement.ddResizable&&!s.ddElement.ddResizable.disabled)}on(s,l,h){return this._getDDElements(s).forEach(d=>d.on(l,g=>{h(g,i.DDManager.dragElement?i.DDManager.dragElement.el:g.target,i.DDManager.dragElement?i.DDManager.dragElement.helper:null)})),this}off(s,l){return this._getDDElements(s).forEach(h=>h.off(l)),this}_getDDElements(s,l=!0){let h=o.Utils.getElements(s);if(!h.length)return[];let d=h.map(g=>g.ddElement||(l?r.DDElement.init(g):null));return l||d.filter(g=>g),d}}u.GridStackDDNative=a,n.GridStackDD.registerPlugin(a)})(Oe);const $e=Symbol();const Fe=["id","gs-id","gs-w","gs-h"],qe={class:"grid-stack-item-content"},Ye=Et("No content defined"),Ve=wt({__name:"WidgetComponent",props:{domId:null,w:{default:6},h:{default:6}},emits:["mounted"],setup(u,{emit:t}){const e=u;Tt(()=>{t("mounted",`${e.domId}`)});let i=z("a"),r=z("d");function n(o,a){i.value=o,r.value=a,console.log("\u0432\u044B\u0437\u0432\u0430\u043D",o,a)}return ne($e,n),(o,a)=>(M(),X("div",{class:"grid-stack-item",id:u.domId,"gs-id":u.domId,"gs-w":u.w,"gs-h":u.h},[N("div",qe,[ae(o.$slots,"default",{},()=>[Ye],!0)])],8,Fe))}});var Xe=bt(Ve,[["__scopeId","data-v-29399428"]]);const Qe=u=>(_e("data-v-1f0856de"),u=u(),ve(),u),Ke={class:"row justify-end"},Je={class:"q-pa-md"},Ze={class:"row no-wrap",id:"trash"},ti={class:"text-purple row items-center justify-evenly"},ei=Qe(()=>N("span",null,"\u0427\u0442\u043E\u0431\u044B \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0438\u0434\u0436\u0435\u0442 \u0441 \u0440\u0430\u0431\u043E\u0447\u0435\u0433\u043E \u0441\u0442\u043E\u043B\u0430 \u043F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0435\u0433\u043E \u043E\u0431\u0440\u0430\u0442\u043D\u043E \u0432 \u0433\u0430\u043B\u043B\u0435\u0440\u0435\u044E",-1)),ii={key:0,class:"row justify-end"},si=Et("\u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),ri={class:"grid-stack"},li={name:"DashboardViewLayoutName"},oi=wt({...li,async setup(u){let t,e;const i=z([]);i.value=([t,e]=he(()=>de()),t=await t,e(),t);let r;const n=ue();z(!1);const o=ce(new Array(0));Tt(()=>{s(),d()});function a(p){r&&r.makeWidget(`#${p}`)}function c(p,f,m,b,v){const x={id:ye(),component:be(()=>p()),w:f,h:m,x:b,y:v};o.value=[...o.value,x]}function s(){r=xt.GridStack.init({removable:"#trash",acceptWidgets:!0,dragIn:".newWidget",dragInOptions:{revert:"invalid",scroll:!1,appendTo:"body",helper:"clone"}}),console.log(r),r.on("removed",(p,f)=>l(f))}function l(p){for(const f of p)if(!f.id)throw new Error("Can't remove widget reference. Id is not found")}function h(){n.isLayoutInEditMode=!1}function d(){g.forEach(p=>{const f=i.value.find(m=>m.name==p.name);c(f.component,p.w,p.h,p.x,p.y)})}const g=[{name:"\u0411\u044B\u0441\u0442\u0440\u044B\u0439 \u043D\u0430\u0432\u0438\u0433\u0430\u0442\u043E\u0440",w:3,h:5,x:0,y:0},{name:"\u041C\u043E\u0438 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B",w:9,h:5,x:3,y:0},{name:"\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C \u043F\u043E\u0434\u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u0438\u044F",w:12,h:3,x:0,y:5},{name:"\u041F\u0435\u0440\u0435\u0447\u0435\u043D\u044C \u0430\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0445 \u041B\u041D\u0410",w:12,h:4,x:0,y:8}];return(p,f)=>(M(),X(pt,null,[k(we,null,{default:O(()=>[vt(N("div",null,[N("div",Ke,[k(yt,{icon:"close",label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",flat:"",onClick:h})]),N("div",Je,[k(Ee,{class:"kt-scroll-area",visible:!0},{default:O(()=>[N("div",Ze,[(M(!0),X(pt,null,Ot(i.value,m=>(M(),lt(Me,{title:m.name,description:m.description,previewUrl:m.imgUrl,onClick:b=>c(m.component)},null,8,["title","description","previewUrl","onClick"]))),256))])]),_:1})]),N("div",ti,[N("div",null,[k(fe,{name:"info"}),ei])])],512),[[ge,rt(n).isLayoutInEditMode]])]),_:1}),rt(n).isLayoutInEditMode?pe("",!0):(M(),X("div",ii,[k(yt,{id:"kt-setup-dashboard-btn",onClick:f[0]||(f[0]=m=>rt(n).isLayoutInEditMode=!0),flat:""},{default:O(()=>[si]),_:1})])),N("section",ri,[(M(!0),X(pt,null,Ot(rt(o),m=>(M(),lt(Xe,{domId:m.id,w:m.w,h:m.h,x:m.x,y:m.y,onMountedOnce:a},{default:O(()=>[(M(),lt(me(m.component)))]),_:2},1032,["domId","w","h","x","y"]))),256))])],64))}});var di=bt(oi,[["__scopeId","data-v-1f0856de"]]);export{di as default};
