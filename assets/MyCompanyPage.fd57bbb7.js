import{t as Ke,al as Ee,am as Ue,r as w,m as Ae,e as T,w as re,h as y,bh as we,bJ as oe,Q as $,bt as Be,ak as ne,p as Fe,aF as Ne,g as Qe,n as Ie,bs as ue,k as ze,c as de,J as _,N as F,M as d,K as P,L as c,bG as Ve,O as q,f as o,F as Le,bj as E,P as A,S as U,bl as O,az as Pe,bx as $e,ax as De,bk as ce,R as I,bu as Me}from"./index.662f4498.js";import{Q as je}from"./QSlideTransition.16973c42.js";import{Q as Oe}from"./QSplitter.287dfcf9.js";const Re=["none","strict","leaf","leaf-filtered"];var Je=Ke({name:"QTree",props:{...Ee,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:l=>Re.includes(l)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazy-load","after-show","after-hide"],setup(l,{slots:x,emit:k}){const{proxy:N}=Qe(),{$q:K}=N,z=Ue(l,K),m=w({}),B=w(l.ticked||[]),b=w(l.expanded||[]);let h={};Ae(()=>{h={}});const R=T(()=>`q-tree q-tree--${l.dense===!0?"dense":"standard"}`+(l.noConnectors===!0?" q-tree--no-connectors":"")+(z.value===!0?" q-tree--dark":"")+(l.color!==void 0?` text-${l.color}`:"")),J=T(()=>l.selected!==void 0),V=T(()=>l.icon||K.iconSet.tree.icon),C=T(()=>l.controlColor||l.color),S=T(()=>l.textColor!==void 0?` text-${l.textColor}`:""),se=T(()=>{const e=l.selectedColor||l.color;return e?` text-${e}`:""}),fe=T(()=>l.filterMethod!==void 0?l.filterMethod:(e,a)=>{const t=a.toLowerCase();return e[l.labelKey]&&e[l.labelKey].toLowerCase().indexOf(t)>-1}),g=T(()=>{const e={},a=(t,r)=>{const i=t.tickStrategy||(r?r.tickStrategy:l.tickStrategy),u=t[l.nodeKey],s=t[l.childrenKey]&&t[l.childrenKey].length>0,L=s!==!0,v=t.disabled!==!0&&J.value===!0&&t.selectable!==!1,le=t.disabled!==!0&&t.expandable!==!1,qe=i!=="none",j=i==="strict",ae=i==="leaf-filtered",W=i==="leaf"||i==="leaf-filtered";let X=t.disabled!==!0&&t.tickable!==!1;W===!0&&X===!0&&r&&r.tickable!==!0&&(X=!1);let Q=t.lazy;Q===!0&&m.value[u]!==void 0&&Array.isArray(t[l.childrenKey])===!0&&(Q=m.value[u]);const n={key:u,parent:r,isParent:s,isLeaf:L,lazy:Q,disabled:t.disabled,link:t.disabled!==!0&&(v===!0||le===!0&&(s===!0||Q===!0)),children:[],matchesFilter:l.filter?fe.value(t,l.filter):!0,selected:u===l.selected&&v===!0,selectable:v,expanded:s===!0?b.value.includes(u):!1,expandable:le,noTick:t.noTick===!0||j!==!0&&Q&&Q!=="loaded",tickable:X,tickStrategy:i,hasTicking:qe,strictTicking:j,leafFilteredTicking:ae,leafTicking:W,ticked:j===!0||L===!0?B.value.includes(u):!1};if(e[u]=n,s===!0&&(n.children=t[l.childrenKey].map(f=>a(f,n)),l.filter&&(n.matchesFilter!==!0?n.matchesFilter=n.children.some(f=>f.matchesFilter):n.noTick!==!0&&n.disabled!==!0&&n.tickable===!0&&ae===!0&&n.children.every(f=>f.matchesFilter!==!0||f.noTick===!0||f.tickable!==!0)===!0&&(n.tickable=!1)),n.matchesFilter===!0&&(n.noTick!==!0&&j!==!0&&n.children.every(f=>f.noTick)===!0&&(n.noTick=!0),W))){if(n.ticked=!1,n.indeterminate=n.children.some(f=>f.indeterminate===!0),n.tickable=n.tickable===!0&&n.children.some(f=>f.tickable),n.indeterminate!==!0){const f=n.children.reduce((ie,Te)=>Te.ticked===!0?ie+1:ie,0);f===n.children.length?n.ticked=!0:f>0&&(n.indeterminate=!0)}n.indeterminate===!0&&(n.indeterminateNextState=n.children.every(f=>f.tickable!==!0||f.ticked!==!0))}return n};return l.nodes.forEach(t=>a(t,null)),e});re(()=>l.ticked,e=>{B.value=e}),re(()=>l.expanded,e=>{b.value=e});function D(e){const a=[].reduce,t=(r,i)=>{if(r||!i)return r;if(Array.isArray(i)===!0)return a.call(Object(i),t,r);if(i[l.nodeKey]===e)return i;if(i[l.childrenKey])return t(null,i[l.childrenKey])};return t(null,l.nodes)}function he(){return B.value.map(e=>D(e))}function ve(){return b.value.map(e=>D(e))}function ye(e){return e&&g.value[e]?g.value[e].expanded:!1}function ke(){l.expanded!==void 0?k("update:expanded",[]):b.value=[]}function Y(){const e=b.value,a=t=>{t[l.childrenKey]&&t[l.childrenKey].length>0&&t.expandable!==!1&&t.disabled!==!0&&(e.push(t[l.nodeKey]),t[l.childrenKey].forEach(a))};l.nodes.forEach(a),l.expanded!==void 0?k("update:expanded",e):b.value=e}function G(e,a,t=D(e),r=g.value[e]){if(r.lazy&&r.lazy!=="loaded"){if(r.lazy==="loading")return;m.value[e]="loading",Array.isArray(t[l.childrenKey])!==!0&&(t[l.childrenKey]=[]),k("lazy-load",{node:t,key:e,done:i=>{m.value[e]="loaded",t[l.childrenKey]=Array.isArray(i)===!0?i:[],Ie(()=>{const u=g.value[e];u&&u.isParent===!0&&Z(e,!0)})},fail:()=>{delete m.value[e],t[l.childrenKey].length===0&&delete t[l.childrenKey]}})}else r.isParent===!0&&r.expandable===!0&&Z(e,a)}function Z(e,a){let t=b.value;const r=l.expanded!==void 0;if(r===!0&&(t=t.slice()),a){if(l.accordion&&g.value[e]){const i=[];g.value[e].parent?g.value[e].parent.children.forEach(u=>{u.key!==e&&u.expandable===!0&&i.push(u.key)}):l.nodes.forEach(u=>{const s=u[l.nodeKey];s!==e&&i.push(s)}),i.length>0&&(t=t.filter(u=>i.includes(u)===!1))}t=t.concat([e]).filter((i,u,s)=>s.indexOf(i)===u)}else t=t.filter(i=>i!==e);r===!0?k("update:expanded",t):b.value=t}function _e(e){return e&&g.value[e]?g.value[e].ticked:!1}function M(e,a){let t=B.value;const r=l.ticked!==void 0;r===!0&&(t=t.slice()),a?t=t.concat(e).filter((i,u,s)=>s.indexOf(i)===u):t=t.filter(i=>e.includes(i)===!1),r===!0&&k("update:ticked",t)}function be(e,a,t){const r={tree:N,node:e,key:t,color:l.color,dark:z.value};return ue(r,"expanded",()=>a.expanded,i=>{i!==a.expanded&&G(t,i)}),ue(r,"ticked",()=>a.ticked,i=>{i!==a.ticked&&M([t],i)}),r}function p(e){return(l.filter?e.filter(a=>g.value[a[l.nodeKey]].matchesFilter):e).map(a=>Ce(a))}function ge(e){if(e.icon!==void 0)return y($,{class:"q-tree__icon q-mr-sm",name:e.icon,color:e.iconColor});const a=e.img||e.avatar;if(a)return y("img",{class:`q-tree__${e.img?"img":"avatar"} q-mr-sm`,src:a})}function xe(){k("after-show")}function me(){k("after-hide")}function Ce(e){const a=e[l.nodeKey],t=g.value[a],r=e.header&&x[`header-${e.header}`]||x["default-header"],i=t.isParent===!0?p(e[l.childrenKey]):[],u=i.length>0||t.lazy&&t.lazy!=="loaded";let s=e.body&&x[`body-${e.body}`]||x["default-body"];const L=r!==void 0||s!==void 0?be(e,t,a):null;return s!==void 0&&(s=y("div",{class:"q-tree__node-body relative-position"},[y("div",{class:S.value},[s(L)])])),y("div",{key:a,class:`q-tree__node relative-position q-tree__node--${u===!0?"parent":"child"}`},[y("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(t.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(t.selected===!0?" q-tree__node--selected":"")+(t.disabled===!0?" q-tree__node--disabled":""),tabindex:t.link===!0?0:-1,onClick:v=>{te(e,t,v)},onKeypress(v){we(v)!==!0&&(v.keyCode===13?te(e,t,v,!0):v.keyCode===32&&H(e,t,v,!0))}},[y("div",{class:"q-focus-helper",tabindex:-1,ref:v=>{h[t.key]=v}}),t.lazy==="loading"?y(oe,{class:"q-tree__spinner",color:C.value}):u===!0?y($,{class:"q-tree__arrow"+(t.expanded===!0?" q-tree__arrow--rotate":""),name:V.value,onClick(v){H(e,t,v)}}):null,t.hasTicking===!0&&t.noTick!==!0?y(Be,{class:"q-tree__tickbox",modelValue:t.indeterminate===!0?null:t.ticked,color:C.value,dark:z.value,dense:!0,keepColor:!0,disable:t.tickable!==!0,onKeydown:ne,"onUpdate:modelValue":v=>{Se(t,v)}}):null,y("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(t.selected===!0?se.value:S.value)},[r?r(L):[ge(e),y("div",e[l.labelKey])]])]),u===!0?y(je,{duration:l.duration,onShow:xe,onHide:me},()=>Fe(y("div",{class:"q-tree__node-collapsible"+S.value,key:`${a}__q`},[s,y("div",{class:"q-tree__children"+(t.disabled===!0?" q-tree__node--disabled":"")},i)]),[[Ne,t.expanded]])):s])}function ee(e){const a=h[e];a&&a.focus()}function te(e,a,t,r){r!==!0&&ee(a.key),J.value&&a.selectable?l.noSelectionUnset===!1?k("update:selected",a.key!==l.selected?a.key:null):a.key!==l.selected&&k("update:selected",a.key||null):H(e,a,t,r),typeof e.handler=="function"&&e.handler(e)}function H(e,a,t,r){t!==void 0&&ne(t),r!==!0&&ee(a.key),G(a.key,!a.expanded,e,a)}function Se(e,a){if(e.indeterminate===!0&&(a=e.indeterminateNextState),e.strictTicking)M([e.key],a);else if(e.leafTicking){const t=[],r=i=>{i.isParent?(a!==!0&&i.noTick!==!0&&i.tickable===!0&&t.push(i.key),i.leafTicking===!0&&i.children.forEach(r)):i.noTick!==!0&&i.tickable===!0&&(i.leafFilteredTicking!==!0||i.matchesFilter===!0)&&t.push(i.key)};r(e),M(t,a)}}return Object.assign(N,{getNodeByKey:D,getTickedNodes:he,getExpandedNodes:ve,isExpanded:ye,collapseAll:ke,expandAll:Y,setExpanded:G,isTicked:_e,setTicked:M}),l.defaultExpandAll===!0&&Y(),()=>{const e=p(l.nodes);return y("div",{class:R.value},e.length===0?l.filter?l.noResultsLabel||K.lang.tree.noResults:l.noNodesLabel||K.lang.tree.noNodes:e)}}});const Ge=I("\u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434\u0438\u0442\u044C \u043B\u044E\u0431\u043E\u0439 \u0442\u0435\u043A\u0441\u0442 \u0432 \u043F\u043E\u043B\u0435 \u0444\u0438\u043B\u044C\u0442\u0440\u0430"),He=A("div",{class:"q-pa-md q-gutter-sm"},null,-1),We={key:0},Xe={key:0,class:"row flex-center justify-center"},Ye={class:"col text-center"},Ze={key:1,class:"column q-pa-md q-gutter-y-md"},pe={class:"text-h4"},et={key:0,class:"row text-subtitle2 q-px-lg"},tt={class:"col-2"},lt={class:"col-10"},at={key:1,class:"column"},it=A("div",{class:"text-h6 q-py-md"},"\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C:",-1),rt=I(" \u0442\u0435\u043B\u0435\u0444\u043E\u043D:"),nt=I(" email:"),ut=["href"],dt={key:2},ft=ze({__name:"MyCompanyPage",setup(l){const x=w(50),k=w(""),N=w(null),K=w(null);T(()=>h.value.companyUnit.headUser);function z(){var V;k.value="",(V=N.value)==null||V.focus()}w({enabled:!1});const{result:m,loading:B,error:b}=de.providers.companyUnit.getUnits(),{result:h,loading:R,error:J}=de.providers.companyUnit.getUnitInfo(K);return(V,C)=>(_(),F(Le,null,[d(m)?(_(),P(Ve,{key:0,ref_key:"filterRef",ref:N,filled:"","bottom-slots":"",clearable:"",modelValue:k.value,"onUpdate:modelValue":C[0]||(C[0]=S=>k.value=S),label:"\u0424\u0438\u043B\u044C\u0442\u0440"},{hint:c(()=>[Ge]),append:c(()=>[k.value!==""?(_(),P($,{key:0,class:"cursor-pointer",name:"clear",onClick:z})):q("",!0)]),_:1},8,["modelValue"])):q("",!0),o(Oe,{modelValue:x.value,"onUpdate:modelValue":C[2]||(C[2]=S=>x.value=S)},{before:c(()=>[He,d(B)?(_(),F("div",We,"loading")):q("",!0),d(b)?(_(),P(O,{key:1},{default:c(()=>[o(E,null,{default:c(()=>[o($,{name:"error"})]),_:1}),o(E,null,{default:c(()=>[A("pre",null,U(d(b)),1)]),_:1})]),_:1})):q("",!0),d(m)?(_(),P(Je,{key:2,nodes:d(m),filter:k.value,selected:K.value,"onUpdate:selected":C[1]||(C[1]=S=>K.value=S),"node-key":"id","label-key":"title","children-key":"childCompanyUnitsList","default-expand-all":"",accordition:""},null,8,["nodes","filter","selected"])):q("",!0)]),after:c(()=>[d(R)?(_(),F("div",Xe,[A("div",Ye,[o(oe)])])):q("",!0),d(h)?(_(),F("div",Ze,[A("div",pe,U(d(h).title),1),d(h).description?(_(),F("div",et,[A("div",tt,[o($,{name:"info",color:"blue"})]),A("div",lt,U(d(h).description),1)])):q("",!0),d(h).headUser?(_(),F("div",at,[it,o(Pe,{flat:"",bordered:""},{default:c(()=>[o(O,null,{default:c(()=>[o(E,{avatar:""},{default:c(()=>[o($e,null,{default:c(()=>[o(De,{src:d(h).headUser.avatarUrl},null,8,["src"])]),_:1})]),_:1}),o(E,null,{default:c(()=>[o(ce,null,{default:c(()=>[I(U(d(h).headUser.firstName)+" "+U(d(h).headUser.lastName),1)]),_:1}),d(h).headUser.jobTitle?(_(),P(ce,{key:0,caption:""},{default:c(()=>[I(U(d(h).headUser.jobTitle),1)]),_:1})):q("",!0)]),_:1})]),_:1}),o(Me),o(O,null,{default:c(()=>[o(E,null,{default:c(()=>[rt]),_:1}),o(E,null,{default:c(()=>[I(U(d(h).headUser.phone),1)]),_:1})]),_:1}),o(O,null,{default:c(()=>[o(E,null,{default:c(()=>[nt]),_:1}),o(E,null,{default:c(()=>[A("a",{href:`mailto:${d(h).headUser.email}`},U(d(h).headUser.email),9,ut)]),_:1})]),_:1})]),_:1})])):(_(),F("div",dt,"\u{1F622} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438 \u043E \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u0435 \u043D\u0435\u0442"))])):q("",!0)]),_:1},8,["modelValue"])],64))}});export{ft as default};
